<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Gi√° Tr·ªã & Nghi·ªám C·ªßa ƒêa Th·ª©c</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800&family=Space+Mono:wght@400;700&display=swap');
        
        body {
            font-family: 'Nunito', sans-serif;
            background-color: #faf5ff; /* N·ªÅn t√≠m nh·∫°t th√¢n thi·ªán */
        }
        
        .math-text {
            font-family: 'Space Mono', monospace;
        }

        /* ·∫®n m≈©i t√™n tƒÉng gi·∫£m c·ªßa √¥ input number */
        input[type=number]::-webkit-inner-spin-button, 
        input[type=number]::-webkit-outer-spin-button { 
            -webkit-appearance: none; 
            margin: 0; 
        }
        input[type=number] {
            -moz-appearance: textfield;
        }

        /* Hi·ªáu ·ª©ng rung l·∫Øc khi ch·ªçn sai/nh·∫≠p sai */
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px) rotate(-3deg); }
            75% { transform: translateX(5px) rotate(3deg); }
        }
        .animate-shake {
            animation: shake 0.3s ease-in-out;
        }

        .blueprint-bg {
            background-image: 
                radial-gradient(#e5e7eb 1px, transparent 1px);
            background-size: 20px 20px;
        }
    </style>
</head>
<body class="min-h-screen text-gray-800 py-8 px-4 sm:px-6 lg:px-8">

    <div class="max-w-4xl mx-auto space-y-10">
        
        <!-- Header -->
        <header class="text-center mb-10">
            <div class="inline-block bg-purple-100 p-4 rounded-full mb-4 shadow-sm">
                <span class="text-5xl drop-shadow-md">üîÆ</span>
            </div>
            <h1 class="text-4xl md:text-5xl font-extrabold text-purple-800 mb-4 tracking-tight">Gi√° Tr·ªã & Nghi·ªám ƒêa Th·ª©c</h1>
            <p class="text-xl text-gray-600">Kh√°m ph√° s·ª©c m·∫°nh c·ªßa c√°c con s·ªë khi thay v√†o bi·∫øn</p>
        </header>

        <!-- ================= KHU V·ª∞C 1: GI√Å TR·ªä C·ª¶A ƒêA TH·ª®C ================= -->
        <section id="value-section" class="bg-white p-6 md:p-10 rounded-3xl shadow-xl border-t-8 border-purple-500 transition-all duration-500">
            <div class="flex items-center gap-4 mb-6">
                <div class="bg-purple-100 p-3 rounded-full text-purple-600 text-2xl shadow-inner">‚öôÔ∏è</div>
                <h2 class="text-2xl md:text-3xl font-bold text-purple-700">Ho·∫°t ƒê·ªông 1: C·ªó M√°y Gi√° Tr·ªã</h2>
            </div>
            
            <div class="bg-purple-50 p-6 rounded-2xl border border-purple-100 mb-8">
                <p class="text-gray-700 text-lg mb-2">Cho ƒëa th·ª©c:</p>
                <p class="math-text font-bold text-2xl md:text-3xl text-purple-700 bg-white px-4 py-2 rounded-lg shadow-sm border border-purple-200 inline-block">A(x) = 2x¬≤ - x - 3</p>
                <p class="text-gray-700 mt-4 text-lg">H√£y t√≠nh gi√° tr·ªã c·ªßa ƒëa th·ª©c <strong>A(x)</strong> t·∫°i <strong>x = -1</strong> b·∫±ng c√°ch thay s·ªë v√†o c√°c √¥ tr·ªëng d∆∞·ªõi ƒë√¢y:</p>
            </div>
            
            <div class="bg-white border-2 border-dashed border-purple-300 rounded-2xl p-6 md:p-8 flex flex-col items-center shadow-inner relative overflow-hidden blueprint-bg">
                <!-- Decorative gears -->
                <div class="absolute -top-4 -right-4 text-6xl opacity-10 animate-spin-slow" style="animation: spin 8s linear infinite;">‚öôÔ∏è</div>
                <div class="absolute -bottom-4 -left-4 text-6xl opacity-10" style="animation: spin 8s linear infinite reverse;">‚öôÔ∏è</div>

                <div class="flex flex-wrap items-center justify-center gap-2 text-xl md:text-2xl math-text font-bold text-gray-800 z-10 w-full">
                    <span class="text-purple-700 whitespace-nowrap">A(-1) = </span>
                    <span class="whitespace-nowrap">2.(<input type="number" id="val-step1-1" class="w-12 md:w-16 text-center border-b-4 border-gray-300 bg-white outline-none focus:border-purple-500 py-1 text-purple-700 shadow-sm rounded-md">)¬≤</span>
                    <span class="whitespace-nowrap"> - (<input type="number" id="val-step1-2" class="w-12 md:w-16 text-center border-b-4 border-gray-300 bg-white outline-none focus:border-purple-500 py-1 text-purple-700 shadow-sm rounded-md">)</span>
                    <span class="whitespace-nowrap"> - 3</span>
                </div>
                
                <div class="flex flex-wrap items-center justify-center gap-2 text-xl md:text-2xl math-text font-bold text-gray-800 mt-6 z-10 w-full">
                    <span class="text-gray-400">=</span>
                    <input type="number" id="val-step2-1" class="w-12 md:w-16 text-center border-b-4 border-gray-300 bg-white outline-none focus:border-purple-500 py-1 text-purple-700 shadow-sm rounded-md" placeholder="?">
                    <span class="whitespace-nowrap"> - (<input type="number" id="val-step2-2" class="w-12 md:w-16 text-center border-b-4 border-gray-300 bg-white outline-none focus:border-purple-500 py-1 text-purple-700 shadow-sm rounded-md" placeholder="?">)</span>
                    <span class="whitespace-nowrap"> - 3</span>
                </div>
                
                <div class="flex flex-wrap items-center justify-center gap-4 text-2xl md:text-3xl math-text font-bold text-gray-800 mt-8 z-10 w-full">
                    <span class="text-gray-400">=</span>
                    <input type="number" id="val-final" class="w-32 text-center border-4 border-purple-200 bg-purple-50 rounded-xl outline-none focus:border-purple-500 focus:ring-4 focus:ring-purple-100 py-2 text-purple-800 shadow-inner" placeholder="K·∫øt qu·∫£">
                </div>
                
                <div id="val-msg" class="mt-6 min-h-[2.5rem] text-center w-full z-10 flex justify-center items-center"></div>
                
                <button id="btn-check-val" onclick="checkValueActivity()" class="mt-6 bg-purple-600 text-white px-8 py-3 rounded-full font-bold hover:bg-purple-700 transition transform hover:scale-105 active:scale-95 shadow-md z-10 w-full md:w-auto">
                    Ho√†n Th√†nh T√≠nh To√°n üöÄ
                </button>
            </div>
        </section>

        <!-- ================= KHU V·ª∞C 2: TRUY T√åM NGHI·ªÜM S·ªê ================= -->
        <section id="root-section" class="bg-white p-6 md:p-10 rounded-3xl shadow-xl border-t-8 border-rose-500 transition-all duration-500">
            <div class="flex items-center gap-4 mb-6">
                <div class="bg-rose-100 p-3 rounded-full text-rose-600 text-2xl shadow-inner">üéØ</div>
                <h2 class="text-2xl md:text-3xl font-bold text-rose-700">Ho·∫°t ƒê·ªông 2: Th·ª£ SƒÉn Nghi·ªám S·ªë</h2>
            </div>

            <div class="bg-rose-50 p-6 md:p-8 rounded-2xl border border-rose-100 mb-8">
                <div class="flex gap-4 mb-6 items-start">
                    <span class="text-3xl md:text-4xl drop-shadow-md">üí°</span>
                    <div class="text-gray-700 text-lg md:text-xl">
                        <p class="mb-2">·ªû ho·∫°t ƒë·ªông tr∆∞·ªõc, ta t√≠nh ƒë∆∞·ª£c <strong>A(-1) = 0</strong>. Ta n√≥i <span class="math-text text-rose-600 font-bold">x = -1</span> l√† m·ªôt <strong>nghi·ªám</strong> c·ªßa ƒëa th·ª©c A(x).</p>
                        <p class="bg-white p-4 rounded-xl shadow-sm border border-rose-100 mt-4 text-rose-900 leading-relaxed">
                            <strong>K·∫øt lu·∫≠n:</strong> N·∫øu t·∫°i <span class="math-text">x = a</span>, ƒëa th·ª©c <span class="math-text">P(x)</span> c√≥ gi√° tr·ªã b·∫±ng <strong class="text-rose-600 font-bold text-2xl">0</strong>, th√¨ <span class="math-text">a</span> ƒë∆∞·ª£c g·ªçi l√† m·ªôt <strong class="uppercase text-rose-600">nghi·ªám</strong> c·ªßa ƒëa th·ª©c ƒë√≥.
                        </p>
                    </div>
                </div>
                
                <hr class="border-rose-200 my-6">
                
                <p class="text-gray-800 text-lg md:text-xl font-bold mb-3 text-center md:text-left">Th·ª≠ th√°ch 1: D√πng "M√°y Qu√©t" t√¨m nghi·ªám</p>
                <div class="text-center md:text-left">
                    <p class="math-text font-bold text-3xl md:text-4xl text-rose-700 bg-white px-6 py-3 rounded-xl shadow-md border border-rose-200 inline-block mb-4">B(x) = x¬≥ - 4x</p>
                </div>
                <p class="text-gray-600 mt-2 text-md md:text-lg text-center md:text-left">H√£y click v√†o c√°c con s·ªë d∆∞·ªõi ƒë√¢y ƒë·ªÉ ƒë∆∞a v√†o m√°y qu√©t xem s·ªë n√†o l√†m cho B(x) = 0 nh√©! (C√≥ 3 nghi·ªám ƒë·∫•y)</p>
            </div>

            <div class="flex flex-wrap justify-center gap-4 md:gap-6 mb-8" id="root-buttons">
                <!-- C√°c n√∫t ch·ªçn nghi·ªám -->
                <button onclick="checkRoot(this, -2)" data-is-root="true" class="relative w-16 h-16 md:w-20 md:h-20 rounded-full bg-white border-4 border-gray-300 text-xl md:text-2xl font-bold text-gray-700 shadow-md hover:border-rose-400 hover:text-rose-500 transition-all transform hover:scale-110 flex items-center justify-center math-text">-2</button>
                <button onclick="checkRoot(this, -1)" data-is-root="false" class="relative w-16 h-16 md:w-20 md:h-20 rounded-full bg-white border-4 border-gray-300 text-xl md:text-2xl font-bold text-gray-700 shadow-md hover:border-rose-400 hover:text-rose-500 transition-all transform hover:scale-110 flex items-center justify-center math-text">-1</button>
                <button onclick="checkRoot(this, 0)" data-is-root="true" class="relative w-16 h-16 md:w-20 md:h-20 rounded-full bg-white border-4 border-gray-300 text-xl md:text-2xl font-bold text-gray-700 shadow-md hover:border-rose-400 hover:text-rose-500 transition-all transform hover:scale-110 flex items-center justify-center math-text">0</button>
                <button onclick="checkRoot(this, 1)" data-is-root="false" class="relative w-16 h-16 md:w-20 md:h-20 rounded-full bg-white border-4 border-gray-300 text-xl md:text-2xl font-bold text-gray-700 shadow-md hover:border-rose-400 hover:text-rose-500 transition-all transform hover:scale-110 flex items-center justify-center math-text">1</button>
                <button onclick="checkRoot(this, 2)" data-is-root="true" class="relative w-16 h-16 md:w-20 md:h-20 rounded-full bg-white border-4 border-gray-300 text-xl md:text-2xl font-bold text-gray-700 shadow-md hover:border-rose-400 hover:text-rose-500 transition-all transform hover:scale-110 flex items-center justify-center math-text">2</button>
            </div>

            <!-- B·∫£ng k·∫øt qu·∫£ qu√©t -->
            <div id="root-result-board" class="bg-gray-50 border-2 border-dashed border-gray-300 rounded-2xl p-6 text-center min-h-[140px] flex flex-col items-center justify-center shadow-inner transition-all duration-300">
                <p class="text-gray-400 italic text-lg">Ch·ªçn m·ªôt s·ªë ·ªü tr√™n ƒë·ªÉ m√°y qu√©t ki·ªÉm tra...</p>
            </div>
            
            <!-- Thanh ti·∫øn tr√¨nh t√¨m nghi·ªám -->
            <div id="root-progress" class="mt-6 flex justify-center gap-3 hidden">
                <div class="w-4 h-4 rounded-full bg-gray-300 transition-colors duration-500 shadow-inner" id="dot-1"></div>
                <div class="w-4 h-4 rounded-full bg-gray-300 transition-colors duration-500 shadow-inner" id="dot-2"></div>
                <div class="w-4 h-4 rounded-full bg-gray-300 transition-colors duration-500 shadow-inner" id="dot-3"></div>
            </div>
        </section>

        <!-- ================= KHU V·ª∞C 3: TH·ª¨ TH√ÅCH 2 ================= -->
        <section id="manual-root-section" class="bg-white p-6 md:p-10 rounded-3xl shadow-xl border-t-8 border-amber-500 transition-all duration-500">
            <div class="flex items-center gap-4 mb-6">
                <div class="bg-amber-100 p-3 rounded-full text-amber-600 text-2xl shadow-inner">‚úçÔ∏è</div>
                <h2 class="text-2xl md:text-3xl font-bold text-amber-700">Th·ª≠ Th√°ch 2: T·ª± Gi·∫£i M√£ Nghi·ªám</h2>
            </div>

            <div class="bg-amber-50 p-6 rounded-2xl border border-amber-100 mb-8 text-gray-700 text-lg">
                <p>B√¢y gi·ªù, kh√¥ng d√πng m√°y qu√©t n·ªØa. B·∫°n h√£y t·ª± <strong>nh√°p</strong> ƒë·ªÉ t√¨m ra s·ªë n√†o l√†m cho c√°c ƒëa th·ª©c sau b·∫±ng 0 nh√©!</p>
                <p class="text-sm italic mt-2 text-gray-500">G·ª£i √Ω: Cho ƒëa th·ª©c b·∫±ng 0 r·ªìi gi·∫£i ph∆∞∆°ng tr√¨nh t√¨m x.</p>
            </div>

            <div class="grid grid-cols-1 md:grid-cols-2 gap-8 mb-8">
                <!-- B√†i 1: ƒêa th·ª©c b·∫≠c 1 -->
                <div class="bg-white border-2 border-amber-200 p-6 rounded-2xl shadow-sm hover:shadow-md transition">
                    <div class="flex justify-between items-start mb-4">
                        <span class="bg-amber-100 text-amber-800 text-xs font-bold px-3 py-1 rounded-full uppercase">C√¢u 1</span>
                        <span class="text-gray-400 text-sm">C√≥ 1 nghi·ªám</span>
                    </div>
                    <p class="math-text font-bold text-2xl text-center text-amber-700 bg-amber-50/50 py-3 rounded-xl border border-amber-100 mb-6">C(x) = 3x - 12</p>
                    
                    <div class="flex items-center justify-center gap-3">
                        <span class="font-bold text-gray-700 text-lg">x = </span>
                        <input type="number" id="manual-root-1" class="w-24 text-center text-2xl p-2 border-2 border-gray-300 rounded-xl outline-none focus:border-amber-500 focus:ring-2 focus:ring-amber-200 math-text text-amber-700" placeholder="?">
                    </div>
                </div>

                <!-- B√†i 2: ƒêa th·ª©c b·∫≠c 2 -->
                <div class="bg-white border-2 border-amber-200 p-6 rounded-2xl shadow-sm hover:shadow-md transition">
                    <div class="flex justify-between items-start mb-4">
                        <span class="bg-amber-100 text-amber-800 text-xs font-bold px-3 py-1 rounded-full uppercase">C√¢u 2</span>
                        <span class="text-gray-400 text-sm">C√≥ 2 nghi·ªám</span>
                    </div>
                    <p class="math-text font-bold text-2xl text-center text-amber-700 bg-amber-50/50 py-3 rounded-xl border border-amber-100 mb-6">D(x) = x¬≤ - 25</p>
                    
                    <div class="flex flex-col sm:flex-row items-center justify-center gap-4">
                        <div class="flex items-center gap-2">
                            <span class="font-bold text-gray-700 text-lg">x‚ÇÅ = </span>
                            <input type="number" id="manual-root-2a" class="w-20 text-center text-2xl p-2 border-2 border-gray-300 rounded-xl outline-none focus:border-amber-500 focus:ring-2 focus:ring-amber-200 math-text text-amber-700" placeholder="?">
                        </div>
                        <span class="font-bold text-gray-400 hidden sm:inline">v√†</span>
                        <div class="flex items-center gap-2">
                            <span class="font-bold text-gray-700 text-lg">x‚ÇÇ = </span>
                            <input type="number" id="manual-root-2b" class="w-20 text-center text-2xl p-2 border-2 border-gray-300 rounded-xl outline-none focus:border-amber-500 focus:ring-2 focus:ring-amber-200 math-text text-amber-700" placeholder="?">
                        </div>
                    </div>
                </div>
            </div>

            <!-- Khu v·ª±c th√¥ng b√°o l·ªói/th√†nh c√¥ng cho ph·∫ßn T·ª± gi·∫£i -->
            <div id="manual-msg" class="mb-6 text-center min-h-[3rem] transition-all duration-300"></div>

            <div class="text-center">
                <button id="btn-check-manual" onclick="checkManualRoots()" class="bg-amber-500 text-white px-10 py-4 rounded-full font-bold text-xl hover:bg-amber-600 transition transform hover:scale-105 active:scale-95 shadow-lg w-full md:w-auto">
                    N·ªôp B√†i Gi·∫£i üìù
                </button>
            </div>
        </section>

        <!-- Footer -->
        <footer class="text-center mt-10 text-gray-500 text-sm pb-10">
            T√†i li·ªáu h·ªçc t·∫≠p t∆∞∆°ng t√°c - Ch·ªß ƒë·ªÅ: Gi√° Tr·ªã v√† Nghi·ªám c·ªßa ƒêa Th·ª©c
        </footer>
    </div>

    <script>
        // Hi·ªáu ·ª©ng ph√°o gi·∫•y
        function confettiEffect() {
            const duration = 3000;
            const end = Date.now() + duration;

            (function frame() {
                const confetto = document.createElement('div');
                confetto.className = 'fixed w-3 h-3 rounded-full pointer-events-none z-50';
                confetto.style.left = Math.random() * 100 + 'vw';
                confetto.style.top = '-10px';
                confetto.style.backgroundColor = ['#f87171', '#60a5fa', '#34d399', '#fbbf24', '#a78bfa', '#ec4899'][Math.floor(Math.random() * 6)];
                if(Math.random() > 0.5) confetto.style.borderRadius = '0';

                document.body.appendChild(confetto);

                const animation = confetto.animate([
                    { transform: 'translate3d(0,0,0) rotate(0deg)', opacity: 1 },
                    { transform: `translate3d(${Math.random()*300 - 150}px, 100vh, 0) rotate(${Math.random()*720}deg)`, opacity: 0 }
                ], {
                    duration: Math.random() * 1000 + 1500,
                    easing: 'cubic-bezier(.37,0,.63,1)'
                });

                animation.onfinish = () => confetto.remove();

                if (Date.now() < end) {
                    requestAnimationFrame(frame);
                }
            }());
        }

        // --- LOGIC HO·∫†T ƒê·ªòNG 1: GI√Å TR·ªä C·ª¶A ƒêA TH·ª®C ---
        function checkValueActivity() {
            const s1_1 = parseInt(document.getElementById('val-step1-1').value);
            const s1_2 = parseInt(document.getElementById('val-step1-2').value);
            const s2_1 = parseInt(document.getElementById('val-step2-1').value);
            const s2_2 = parseInt(document.getElementById('val-step2-2').value);
            const finalVal = parseInt(document.getElementById('val-final').value);
            const msg = document.getElementById('val-msg');

            if(isNaN(s1_1) || isNaN(s1_2) || isNaN(s2_1) || isNaN(s2_2) || isNaN(finalVal)) {
                msg.innerHTML = '<span class="text-amber-600 bg-amber-50 px-4 py-2 rounded-lg inline-block border border-amber-200">H√£y ƒëi·ªÅn ƒë·∫ßy ƒë·ªß c√°c b∆∞·ªõc t√≠nh nh√©! ‚öôÔ∏è</span>';
                return;
            }

            if(s1_1 !== -1 || s1_2 !== -1) {
                msg.innerHTML = '<span class="text-red-600 bg-red-50 px-4 py-2 rounded-lg inline-block border border-red-200">Ch∆∞a ƒë√∫ng! ·ªû b∆∞·ªõc 1, b·∫°n c·∫ßn thay x b·∫±ng ƒë√∫ng gi√° tr·ªã ƒë·ªÅ b√†i cho l√† -1. ‚ùå</span>';
                return;
            }

            if(s2_1 !== 2 || s2_2 !== -1) {
                msg.innerHTML = '<span class="text-red-600 bg-red-50 px-4 py-2 rounded-lg inline-block border border-red-200">T√≠nh to√°n b∆∞·ªõc 2 b·ªã nh·∫ßm r·ªìi. Ch√∫ √Ω: 2.(-1)¬≤ = 2.1 = 2 nh√©! ‚ùå</span>';
                return;
            }

            if(finalVal !== 0) {
                msg.innerHTML = '<span class="text-red-600 bg-red-50 px-4 py-2 rounded-lg inline-block border border-red-200">B∆∞·ªõc cu·ªëi t√≠nh nh·∫ßm r·ªìi: 2 - (-1) - 3 = 2 + 1 - 3 = ? ‚ùå</span>';
                return;
            }

            // ƒê√∫ng
            msg.innerHTML = '<span class="text-green-700 bg-green-50 px-6 py-3 rounded-xl inline-block border border-green-200 font-bold text-lg shadow-sm">Ch√≠nh x√°c tuy·ªát ƒë·ªëi! üéâ Gi√° tr·ªã c·ªßa ƒëa th·ª©c t·∫°i x = -1 l√† 0.</span>';
            document.getElementById('btn-check-val').classList.add('hidden');
            
            ['val-step1-1', 'val-step1-2', 'val-step2-1', 'val-step2-2', 'val-final'].forEach(id => {
                const el = document.getElementById(id);
                el.readOnly = true;
                el.classList.add('bg-purple-100');
                el.classList.remove('bg-white');
            });

            setTimeout(() => {
                document.getElementById('root-section').scrollIntoView({behavior: 'smooth', block: 'center'});
            }, 2000);
        }

        // --- LOGIC HO·∫†T ƒê·ªòNG 2: NGHI·ªÜM C·ª¶A ƒêA TH·ª®C (Click Game) ---
        let rootsFound = 0;
        
        function checkRoot(btn, xValue) {
            if(btn.disabled) return; 
            
            document.getElementById('root-progress').classList.remove('hidden');
            const isRoot = btn.getAttribute('data-is-root') === 'true';
            const board = document.getElementById('root-result-board');
            
            const mathPow3 = Math.pow(xValue, 3);
            const math4x = 4 * xValue;
            const finalCalc = mathPow3 - math4x;
            
            const calcString = `B(${xValue}) = (${xValue})¬≥ - 4.(${xValue}) = ${mathPow3} - (${math4x})`;

            if(isRoot) {
                btn.classList.remove('border-gray-300', 'text-gray-700');
                btn.classList.add('border-green-500', 'bg-green-100', 'text-green-700', 'scale-110');
                btn.innerHTML += '<span class="absolute -top-3 -right-3 text-2xl drop-shadow-md">‚úÖ</span>';
                
                board.innerHTML = `
                    <div class="text-green-800 bg-green-50 px-6 py-4 rounded-xl border-2 border-green-400 w-full animate-pulse shadow-md">
                        <p class="font-bold text-xl md:text-2xl mb-2">ƒê√∫ng r·ªìi! <span class="text-rose-600">${xValue}</span> l√† m·ªôt nghi·ªám.</p>
                        <p class="math-text text-lg md:text-xl">${calcString} = <strong class="text-3xl text-green-600">0</strong></p>
                    </div>
                `;
                
                rootsFound++;
                document.getElementById(`dot-${rootsFound}`).classList.replace('bg-gray-300', 'bg-green-500');
                btn.disabled = true;

                if(rootsFound === 3) {
                    const buttons = document.getElementById('root-buttons').querySelectorAll('button');
                    buttons.forEach(b => b.disabled = true); 
                    
                    setTimeout(() => {
                        board.innerHTML = `
                            <div class="text-white bg-gradient-to-r from-rose-500 to-pink-600 px-6 py-8 rounded-xl shadow-2xl w-full transform scale-105 transition duration-500 border-4 border-rose-300">
                                <p class="font-extrabold text-3xl md:text-4xl mb-3 drop-shadow-lg">üéâ XU·∫§T S·∫ÆC! üéâ</p>
                                <p class="text-lg md:text-xl">B·∫°n ƒë√£ truy t√¨m th√†nh c√¥ng c·∫£ 3 nghi·ªám c·ªßa ƒëa th·ª©c B(x) l√†: <strong class="text-yellow-300 text-2xl">-2, 0, 2</strong>.</p>
                                <p class="mt-4 text-rose-100 italic font-medium">ƒêa th·ª©c b·∫≠c 3 c√≥ th·ªÉ c√≥ t·ªëi ƒëa 3 nghi·ªám. B·∫°n ƒë√£ t√¨m ra h·∫øt r·ªìi ƒë√≥!</p>
                            </div>
                        `;
                        let shots = 0;
                        const interval = setInterval(() => {
                            confettiEffect();
                            shots++;
                            if(shots > 5) clearInterval(interval);
                        }, 400);

                        // Cu·ªôn xu·ªëng Th·ª≠ th√°ch 2
                        setTimeout(() => {
                            document.getElementById('manual-root-section').scrollIntoView({behavior: 'smooth', block: 'center'});
                        }, 3000);
                    }, 1200);
                }
            } else {
                btn.classList.add('animate-shake');
                setTimeout(() => btn.classList.remove('animate-shake'), 300); 
                
                board.innerHTML = `
                    <div class="text-red-800 bg-red-50 px-6 py-4 rounded-xl border-2 border-red-400 w-full shadow-sm">
                        <p class="font-bold text-xl mb-2">R·∫•t ti·∫øc, <span class="text-rose-600">${xValue}</span> KH√îNG ph·∫£i l√† nghi·ªám.</p>
                        <p class="math-text text-lg">${calcString} = <strong class="text-2xl text-red-600">${finalCalc} ‚â† 0</strong></p>
                    </div>
                `;
                
                btn.disabled = true;
                btn.classList.replace('border-gray-300', 'border-red-400');
                btn.classList.replace('text-gray-700', 'text-red-500');
                
                setTimeout(() => {
                    btn.disabled = false;
                    btn.classList.replace('border-red-400', 'border-gray-300');
                    btn.classList.replace('text-red-500', 'text-gray-700');
                }, 2000);
            }
        }

        // --- LOGIC TH·ª¨ TH√ÅCH 2: T·ª∞ GI·∫¢I NGHI·ªÜM ---
        function checkManualRoots() {
            const r1 = parseInt(document.getElementById('manual-root-1').value);
            const r2a = parseInt(document.getElementById('manual-root-2a').value);
            const r2b = parseInt(document.getElementById('manual-root-2b').value);
            const msgDiv = document.getElementById('manual-msg');

            // Reset effects
            document.querySelectorAll('#manual-root-section input').forEach(inp => inp.classList.remove('animate-shake', 'border-red-500'));

            if (isNaN(r1) || isNaN(r2a) || isNaN(r2b)) {
                msgDiv.innerHTML = '<span class="text-amber-600 bg-amber-50 px-4 py-2 rounded-lg inline-block border border-amber-200">Vui l√≤ng ƒëi·ªÅn ƒë·∫ßy ƒë·ªß c√°c √¥ tr·ªëng b·∫±ng s·ªë nh√©! üßê</span>';
                return;
            }

            let isError = false;
            let errorHtml = '<div class="text-left bg-red-50 border-l-4 border-red-500 p-4 rounded-r-lg max-w-2xl mx-auto"><h3 class="text-lg font-bold text-red-800 mb-2">C·∫ßn xem l·∫°i:</h3><ul class="list-disc ml-5 text-red-700 space-y-1">';

            // Ki·ªÉm tra C√¢u 1: 3x - 12 = 0 => x = 4
            if (r1 !== 4) {
                isError = true;
                errorHtml += '<li><strong>C√¢u 1:</strong> B·∫°n h√£y th·ª≠ gi·∫£i ph∆∞∆°ng tr√¨nh 3x - 12 = 0 xem x b·∫±ng m·∫•y nh√©. (Chuy·ªÉn -12 sang v·∫ø ph·∫£i r·ªìi chia cho 3).</li>';
                document.getElementById('manual-root-1').classList.add('animate-shake', 'border-red-500');
            }

            // Ki·ªÉm tra C√¢u 2: x^2 - 25 = 0 => x = 5, -5
            const validRoots = [5, -5];
            const studentRoots = [r2a, r2b];
            
            // S·∫Øp x·∫øp ƒë·ªÉ so s√°nh kh√¥ng ph√¢n bi·ªát th·ª© t·ª± (VD: nh·∫≠p 5,-5 hay -5,5 ƒë·ªÅu ƒë√∫ng)
            studentRoots.sort((a,b) => a-b); 
            validRoots.sort((a,b) => a-b);

            if (studentRoots[0] !== validRoots[0] || studentRoots[1] !== validRoots[1]) {
                isError = true;
                
                // G·ª£i √Ω chi ti·∫øt h∆°n n·∫øu h·ªçc sinh nh·∫≠p 2 s·ªë gi·ªëng nhau
                if(r2a === r2b) {
                    errorHtml += '<li><strong>C√¢u 2:</strong> ƒêa th·ª©c x¬≤ - 25 c√≥ 2 nghi·ªám ph√¢n bi·ªát (m·ªôt s·ªë d∆∞∆°ng, m·ªôt s·ªë √¢m). B·∫°n ƒëang nh·∫≠p tr√πng s·ªë r·ªìi!</li>';
                } else {
                    errorHtml += '<li><strong>C√¢u 2:</strong> C·∫ßn gi·∫£i x¬≤ - 25 = 0 hay x¬≤ = 25. C√≥ 2 s·ªë n√†o nh√¢n v·ªõi ch√≠nh n√≥ b·∫±ng 25? (Nh·ªõ x√©t c·∫£ s·ªë √¢m nh√©).</li>';
                }
                document.getElementById('manual-root-2a').classList.add('animate-shake', 'border-red-500');
                document.getElementById('manual-root-2b').classList.add('animate-shake', 'border-red-500');
            }

            errorHtml += '</ul></div>';

            if (isError) {
                msgDiv.innerHTML = errorHtml;
            } else {
                // Th√†nh c√¥ng
                msgDiv.innerHTML = `
                    <div class="bg-gradient-to-r from-amber-400 to-orange-500 text-white px-8 py-6 rounded-2xl shadow-xl max-w-2xl mx-auto transform scale-105 transition-all">
                        <p class="font-extrabold text-2xl mb-2">üéâ CH√öC M·ª™NG B·∫†N! üéâ</p>
                        <p class="text-lg">B·∫°n ƒë√£ n·∫Øm b·∫Øt ho√†n to√†n c√°ch t√¨m nghi·ªám c·ªßa ƒëa th·ª©c. Th·∫≠t tuy·ªát v·ªùi!</p>
                    </div>
                `;
                
                // Kh√≥a input
                ['manual-root-1', 'manual-root-2a', 'manual-root-2b'].forEach(id => {
                    const el = document.getElementById(id);
                    el.readOnly = true;
                    el.classList.add('bg-amber-100', 'border-amber-400');
                    el.classList.remove('border-gray-300');
                });
                
                document.getElementById('btn-check-manual').classList.add('hidden');

                // Ph√°o hoa li√™n ho√†n
                let shots = 0;
                const interval = setInterval(() => {
                    confettiEffect();
                    shots++;
                    if(shots > 6) clearInterval(interval);
                }, 300);
            }
        }
    </script>
</body>
</html>
