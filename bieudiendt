<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bi·ªÉu Di·ªÖn & Ph√¢n T√≠ch ƒêa Th·ª©c M·ªôt Bi·∫øn</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Quicksand', sans-serif; background: #f8fafc; }
        .math-text { font-family: 'Times New Roman', serif; font-style: italic; }
        
        /* Hi·ªáu ·ª©ng rung l·∫Øc khi ch·ªçn sai */
        @keyframes shake {
            0%, 100% { transform: translateX(0); }
            25% { transform: translateX(-5px) rotate(-5deg); }
            75% { transform: translateX(5px) rotate(5deg); }
        }
        .animate-shake { animation: shake 0.4s ease-in-out; }
        
        /* Hi·ªáu ·ª©ng m∆∞·ª£t m√† cho highlight kh√°i ni·ªám */
        .transition-highlight { transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1); }
        
        /* Background pattern cho khu v·ª±c s·∫Øp x·∫øp */
        .blueprint-bg {
            background-color: #eff6ff;
            background-image: linear-gradient(rgba(59, 130, 246, 0.1) 1px, transparent 1px),
            linear-gradient(90deg, rgba(59, 130, 246, 0.1) 1px, transparent 1px);
            background-size: 20px 20px;
        }
    </style>
</head>
<body class="p-4 md:p-8 flex justify-center items-start min-h-screen">

    <div id="app" class="max-w-4xl w-full pb-20 mt-4">
        
        <header class="text-center mb-10">
            <div class="inline-block bg-indigo-100 text-indigo-800 px-5 py-2 rounded-full text-sm font-bold mb-4 shadow-sm tracking-wider">TH·ª¨ TH√ÅCH 2</div>
            <h1 class="text-4xl md:text-5xl font-bold text-indigo-700 mb-4 drop-shadow-sm">Ki·∫øn Tr√∫c S∆∞ ƒêa Th·ª©c üèõÔ∏è</h1>
            <p class="text-gray-600 text-lg">H·ªçc c√°ch bi·ªÉu di·ªÖn ƒëa th·ª©c d·∫°ng chu·∫©n v√† kh√°m ph√° c√°c th√†nh ph·∫ßn c·∫•u t·∫°o n√™n n√≥.</p>
        </header>

        <div class="bg-white rounded-3xl shadow-xl overflow-hidden border-2 border-indigo-50">
            
            <!-- Khu v·ª±c 1: Tr√≤ ch∆°i s·∫Øp x·∫øp -->
            <div id="sort-game" class="p-6 md:p-10 transition-all duration-500">
                <div class="text-center mb-8">
                    <h2 class="text-xl font-bold text-gray-800 mb-2">B∆∞·ªõc 1: S·∫Øp x·∫øp thu g·ªçn</h2>
                    <p class="text-gray-600">ƒêa th·ª©c <span class="math-text font-bold text-xl text-indigo-600">P(x)</span> ƒëang b·ªã x√°o tr·ªôn. H√£y <strong>B·∫§M</strong> v√†o c√°c h·∫°ng t·ª≠ b√™n d∆∞·ªõi theo th·ª© t·ª± s·ªë m≈© t·ª´ <strong>CAO xu·ªëng TH·∫§P</strong>.</p>
                </div>

                <!-- Khu v·ª±c c√°c h·∫°ng t·ª≠ b·ªã x√°o tr·ªôn -->
                <div id="scrambled-terms" class="flex flex-wrap gap-4 justify-center mb-10 min-h-[70px]">
                    <!-- Render b·∫±ng JS -->
                </div>

                <!-- Khu v·ª±c b·∫£n v·∫Ω (ƒëa th·ª©c ƒë√£ s·∫Øp x·∫øp) -->
                <div class="blueprint-bg border-4 border-dashed border-indigo-300 rounded-2xl p-8 min-h-[160px] flex flex-col items-center justify-center relative shadow-inner">
                    <div class="absolute top-4 left-6 text-indigo-400 font-bold uppercase tracking-widest text-sm">B·∫£n V·∫Ω P(x)</div>
                    <div id="arranged-terms" class="flex flex-wrap gap-2 items-center text-3xl md:text-4xl math-text font-bold text-gray-800 mt-4">
                        <span class="text-indigo-300 font-sans text-lg italic" id="empty-placeholder">ƒêang ch·ªù b·∫°n ch·ªçn h·∫°ng t·ª≠...</span>
                    </div>
                </div>
            </div>

            <!-- Khu v·ª±c 2: B·∫£ng ph√¢n t√≠ch kh√°i ni·ªám (·∫®n l√∫c ƒë·∫ßu) -->
            <div id="analysis-board" class="hidden bg-indigo-50 p-6 md:p-10 border-t-4 border-indigo-200">
                <div class="text-center mb-8">
                    <h2 class="text-2xl font-bold text-indigo-800 mb-2">B∆∞·ªõc 2: Gi·∫£i M√£ C·∫•u Tr√∫c üîç</h2>
                    <p class="text-indigo-600">Tuy·ªát v·ªùi! B√¢y gi·ªù h√£y b·∫•m v√†o c√°c n√∫t b√™n d∆∞·ªõi ƒë·ªÉ xem c√°c kh√°i ni·ªám c·ªßa ƒëa th·ª©c.</p>
                </div>
                
                <!-- Hi·ªÉn th·ªã ph∆∞∆°ng tr√¨nh t∆∞∆°ng t√°c -->
                <div class="text-3xl md:text-5xl text-center mb-12 math-text font-bold text-gray-800 flex justify-center items-center gap-2 flex-wrap bg-white py-8 px-4 rounded-2xl shadow-md border border-gray-100">
                    <span class="text-indigo-600 mr-2">P(x) = </span>
                    <!-- T·ª´ng th√†nh ph·∫ßn ƒë∆∞·ª£c t√°ch ra ƒë·ªÉ c√≥ th·ªÉ highlight qua JS -->
                    <span id="term-highest" class="transition-highlight"><span id="val-lead">-3</span>x<sup id="val-deg" class="transition-highlight">4</sup></span>
                    <span class="text-gray-400">+ 7x¬≥</span>
                    <span class="text-gray-400">+ 5x¬≤</span>
                    <span class="text-gray-400">- x</span>
                    <span id="term-const" class="px-2 transition-highlight">+ 2</span>
                </div>
                
                <!-- C√°c n√∫t kh√°i ni·ªám -->
                <div class="grid grid-cols-1 sm:grid-cols-3 gap-4 mb-8">
                    <button onclick="highlightConcept('deg')" class="bg-blue-500 hover:bg-blue-600 text-white font-bold py-4 px-4 rounded-xl transition shadow-md border-b-4 border-blue-700 active:border-b-0 active:translate-y-1">
                        B·∫≠c c·ªßa ƒëa th·ª©c
                    </button>
                    <button onclick="highlightConcept('lead')" class="bg-teal-500 hover:bg-teal-600 text-white font-bold py-4 px-4 rounded-xl transition shadow-md border-b-4 border-teal-700 active:border-b-0 active:translate-y-1">
                        H·ªá s·ªë cao nh·∫•t
                    </button>
                    <button onclick="highlightConcept('const')" class="bg-amber-500 hover:bg-amber-600 text-white font-bold py-4 px-4 rounded-xl transition shadow-md border-b-4 border-amber-700 active:border-b-0 active:translate-y-1">
                        H·ªá s·ªë t·ª± do
                    </button>
                </div>
                
                <!-- Khung gi·∫£i th√≠ch kh√°i ni·ªám (ƒë·ªông) -->
                <div id="concept-desc" class="min-h-[120px] bg-white p-6 rounded-2xl text-gray-500 italic border-2 border-dashed border-gray-300 shadow-sm flex items-center justify-center text-center text-lg transition-all duration-300">
                    Ch·ªçn m·ªôt n√∫t ph√≠a tr√™n ƒë·ªÉ b·∫Øt ƒë·∫ßu kh√°m ph√°! üëÜ
                </div>

                <!-- L∆∞u √Ω ƒë·∫∑c bi·ªát (ƒê√£ c·∫≠p nh·∫≠t) -->
                <div class="mt-10 p-6 bg-amber-50 border-l-8 border-amber-500 rounded-r-2xl shadow-sm flex flex-col gap-4 relative overflow-hidden">
                    <h4 class="font-bold text-amber-800 text-xl mb-1 flex items-center gap-2">
                        <span class="text-3xl">üí°</span> L∆∞u √ù Quan Tr·ªçng
                    </h4>
                    <ul class="list-disc ml-8 text-gray-800 text-lg space-y-3">
                        <li>M·ªçi s·ªë th·ª±c kh√°c <span class="math-text font-bold text-xl bg-white px-2 py-1 rounded shadow-sm mx-1">0</span> (v√≠ d·ª•: <span class="math-text text-indigo-700">2, -5, 1/2</span>) ƒë·ªÅu ƒë∆∞·ª£c coi l√† m·ªôt ƒëa th·ª©c c√≥ <strong class="text-amber-700 bg-amber-200 px-2 py-1 rounded">b·∫≠c b·∫±ng 0</strong>.</li>
                        <li>S·ªë <span class="font-bold text-xl text-red-600 math-text bg-white px-2 py-1 rounded shadow-sm mx-1">0</span> c≈©ng ƒë∆∞·ª£c g·ªçi l√† m·ªôt ƒëa th·ª©c (ƒëa th·ª©c kh√¥ng). N√≥ l√† ƒëa th·ª©c duy nh·∫•t <strong class="text-red-600 bg-red-200 px-2 py-1 rounded">KH√îNG C√ì B·∫¨C</strong>.</li>
                    </ul>
                </div>
                
                <div class="text-center mt-12 hidden" id="finish-btn-container">
                     <button onclick="startPractice()" class="bg-gradient-to-r from-green-500 to-emerald-600 hover:from-green-600 hover:to-emerald-700 text-white font-bold py-4 px-10 rounded-full transition shadow-xl text-xl animate-bounce">
                        Chinh ph·ª•c Th·ª±c H√†nh 2 üöÄ
                     </button>
                </div>
            </div>

            <!-- Khu v·ª±c 3: Th·ª±c H√†nh 2 -->
            <div id="practice-section" class="hidden bg-white p-6 md:p-10 border-t-4 border-green-500 transition-all duration-500">
                <div class="text-center mb-8">
                    <h2 class="text-3xl font-bold text-green-700 mb-3">Th·ª±c H√†nh 2: Th·ª≠ Th√°ch N√¢ng Cao üéØ</h2>
                    <p class="text-gray-600 text-lg">Cho ƒëa th·ª©c <span class="math-text font-bold text-2xl text-green-600">Q(x) = 4x‚Å¥ - 3x¬≥ - x¬≤ + 2x + 1 - 4x‚Å¥ + 5x¬≥ - 4x¬≤ + 6x - 4</span></p>
                    
                    <div class="mt-6 space-y-3 text-left max-w-2xl mx-auto bg-green-50 p-6 rounded-xl border border-green-200 shadow-sm">
                        <p class="font-bold text-green-800 text-lg border-b border-green-200 pb-2">Nhi·ªám v·ª• c·ªßa b·∫°n:</p>
                        <ol class="list-decimal ml-6 text-gray-800 space-y-2 text-lg">
                            <li><strong class="text-indigo-600">R√∫t g·ªçn</strong> ƒëa th·ª©c Q(x) ra gi·∫•y nh√°p.</li>
                            <li><strong>ƒêi·ªÅn c√°c h·ªá s·ªë</strong> c·ªßa ƒëa th·ª©c sau khi r√∫t g·ªçn v√†o bi·ªÉu th·ª©c b√™n d∆∞·ªõi.</li>
                            <li>Tr·∫£ l·ªùi c√°c th√¥ng s·ªë c·ªßa ƒëa th·ª©c Q(x).</li>
                        </ol>
                    </div>
                </div>

                <!-- V√πng ƒëi·ªÅn khuy·∫øt h·ªá s·ªë r√∫t g·ªçn -->
                <div class="blueprint-bg border-4 border-dashed border-green-300 rounded-2xl p-6 md:p-10 flex flex-col items-center justify-center relative shadow-inner mb-10 overflow-hidden">
                    <div class="absolute top-4 left-6 text-green-600 font-bold uppercase tracking-widest text-sm">K·∫øt Qu·∫£ R√∫t G·ªçn Q(x)</div>
                    
                    <div class="flex flex-wrap gap-2 md:gap-4 items-baseline justify-center text-2xl md:text-4xl math-text font-bold text-gray-800 mt-8 w-full">
                        <span class="text-green-600">Q(x) = </span>
                        
                        <!-- B·∫≠c 4 -->
                        <div class="flex items-baseline">
                            <input type="number" id="coef-4" placeholder="?" class="w-16 md:w-20 text-center border-b-4 border-green-500 bg-white shadow-inner outline-none focus:border-green-700 text-indigo-700 py-1 rounded-t-md">
                            <span class="ml-1">x‚Å¥</span>
                        </div>
                        
                        <span class="text-green-600">+</span>

                        <!-- B·∫≠c 3 -->
                        <div class="flex items-baseline">
                            <input type="number" id="coef-3" placeholder="?" class="w-16 md:w-20 text-center border-b-4 border-green-500 bg-white shadow-inner outline-none focus:border-green-700 text-indigo-700 py-1 rounded-t-md">
                            <span class="ml-1">x¬≥</span>
                        </div>
                        
                        <span class="text-green-600">+</span>
                        
                        <!-- B·∫≠c 2 -->
                        <div class="flex items-baseline">
                            <input type="number" id="coef-2" placeholder="?" class="w-16 md:w-20 text-center border-b-4 border-green-500 bg-white shadow-inner outline-none focus:border-green-700 text-indigo-700 py-1 rounded-t-md">
                            <span class="ml-1">x¬≤</span>
                        </div>
                        
                        <span class="text-green-600">+</span>
                        
                        <!-- B·∫≠c 1 -->
                        <div class="flex items-baseline">
                            <input type="number" id="coef-1" placeholder="?" class="w-16 md:w-20 text-center border-b-4 border-green-500 bg-white shadow-inner outline-none focus:border-green-700 text-indigo-700 py-1 rounded-t-md">
                            <span class="ml-1">x</span>
                        </div>
                        
                        <span class="text-green-600">+</span>
                        
                        <!-- B·∫≠c 0 (T·ª± do) -->
                        <div class="flex items-baseline">
                            <input type="number" id="coef-0" placeholder="?" class="w-16 md:w-20 text-center border-b-4 border-green-500 bg-white shadow-inner outline-none focus:border-green-700 text-indigo-700 py-1 rounded-t-md">
                        </div>
                    </div>
                    <p class="text-sm text-gray-500 mt-6 italic">* L∆∞u √Ω: ƒêi·ªÅn h·ªá s·ªë k√®m theo d·∫•u √¢m (-) n·∫øu c√≥. N·∫øu h·∫°ng t·ª≠ b·ªã tri·ªát ti√™u, h√£y ƒëi·ªÅn s·ªë 0.</p>
                </div>

                <!-- Form Tr·∫£ l·ªùi th√¥ng s·ªë -->
                <div id="prac-quiz" class="transition-opacity duration-700">
                    <div class="text-center mb-6">
                        <p class="text-sm font-bold text-gray-500 uppercase tracking-wider bg-indigo-50 inline-block px-4 py-1 rounded-full border border-indigo-200">ƒêi·ªÅn th√¥ng s·ªë c·ªßa Q(x)</p>
                    </div>
                    
                    <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-8">
                        <div class="bg-blue-50 p-5 rounded-xl border-2 border-blue-200 text-center shadow-sm">
                            <label class="block text-blue-800 font-bold mb-3 text-lg">B·∫≠c c·ªßa Q(x)</label>
                            <input type="number" id="ans-deg" placeholder="?" class="w-20 text-center text-2xl font-bold p-2 rounded-lg border-2 border-blue-300 focus:border-blue-500 outline-none transition-colors">
                        </div>
                        <div class="bg-teal-50 p-5 rounded-xl border-2 border-teal-200 text-center shadow-sm">
                            <label class="block text-teal-800 font-bold mb-3 text-lg">H·ªá s·ªë cao nh·∫•t</label>
                            <input type="number" id="ans-lead" placeholder="?" class="w-20 text-center text-2xl font-bold p-2 rounded-lg border-2 border-teal-300 focus:border-teal-500 outline-none transition-colors">
                        </div>
                        <div class="bg-amber-50 p-5 rounded-xl border-2 border-amber-200 text-center shadow-sm">
                            <label class="block text-amber-800 font-bold mb-3 text-lg">H·ªá s·ªë t·ª± do</label>
                            <input type="number" id="ans-const" placeholder="?" class="w-20 text-center text-2xl font-bold p-2 rounded-lg border-2 border-amber-300 focus:border-amber-500 outline-none transition-colors">
                        </div>
                    </div>
                    <div class="text-center">
                        <button onclick="checkPracticeAnswers()" class="bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-4 px-12 rounded-full transition shadow-lg text-xl hover:scale-105">
                            N·ªôp b√†i & Ho√†n th√†nh üèÜ
                        </button>
                    </div>
                </div>

                <!-- B√ç K√çP GHI V·ªû -->
                <div id="secret-notes" class="hidden mt-12 max-w-4xl mx-auto transform transition-all duration-1000 translate-y-10 opacity-0">
                    <div class="bg-gradient-to-br from-indigo-900 via-indigo-800 to-purple-900 rounded-3xl shadow-2xl overflow-hidden relative border-4 border-indigo-300/30">
                        <!-- Decorative backgrounds -->
                        <div class="absolute top-0 right-0 -mt-10 -mr-10 w-40 h-40 bg-white opacity-10 rounded-full blur-2xl pointer-events-none"></div>
                        <div class="absolute bottom-0 left-0 -mb-10 -ml-10 w-56 h-56 bg-purple-500 opacity-20 rounded-full blur-3xl pointer-events-none"></div>
                        
                        <div class="p-8 md:p-12 relative z-10">
                            <div class="text-center mb-10">
                                <div class="inline-flex items-center justify-center w-20 h-20 bg-white rounded-full shadow-[0_0_20px_rgba(255,255,255,0.3)] mb-4 transform -rotate-6 hover:rotate-0 transition duration-300">
                                    <span class="text-5xl drop-shadow-md">üìì</span>
                                </div>
                                <h3 class="text-3xl md:text-4xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-yellow-300 to-yellow-100 uppercase tracking-widest drop-shadow-sm" style="font-family: 'Times New Roman', serif;">B√≠ K√≠p Ghi V·ªü</h3>
                                <p class="text-indigo-200 mt-2 text-lg italic">T·ªïng h·ª£p ki·∫øn th·ª©c tr·ªçng t√¢m c·∫ßn nh·ªõ</p>
                            </div>
                            
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                <!-- S·∫Øp x·∫øp -->
                                <div class="bg-white/10 backdrop-blur-md border border-white/20 p-6 rounded-2xl hover:bg-white/20 transition duration-300 shadow-lg group">
                                    <div class="flex items-center gap-4 mb-3">
                                        <div class="w-12 h-12 rounded-full bg-blue-500 flex items-center justify-center text-white text-2xl shadow-inner group-hover:scale-110 transition duration-300">üîÑ</div>
                                        <h4 class="text-xl font-bold text-blue-100">1. S·∫Øp x·∫øp ƒëa th·ª©c</h4>
                                    </div>
                                    <p class="text-indigo-50 text-lg leading-relaxed">
                                        C·∫ßn <strong class="text-yellow-300">thu g·ªçn ƒëa th·ª©c tr∆∞·ªõc</strong>, sau ƒë√≥ x·∫øp c√°c h·∫°ng t·ª≠ theo lu·ªπ th·ª´a <strong class="text-white">gi·∫£m d·∫ßn</strong> (ho·∫∑c tƒÉng d·∫ßn) c·ªßa bi·∫øn.
                                    </p>
                                </div>

                                <!-- B·∫≠c -->
                                <div class="bg-white/10 backdrop-blur-md border border-white/20 p-6 rounded-2xl hover:bg-white/20 transition duration-300 shadow-lg group">
                                    <div class="flex items-center gap-4 mb-3">
                                        <div class="w-12 h-12 rounded-full bg-pink-500 flex items-center justify-center text-white text-2xl shadow-inner group-hover:scale-110 transition duration-300">üìà</div>
                                        <h4 class="text-xl font-bold text-pink-100">2. B·∫≠c c·ªßa ƒëa th·ª©c</h4>
                                    </div>
                                    <p class="text-indigo-50 text-lg leading-relaxed">
                                        L√† <strong class="text-yellow-300">s·ªë m≈© cao nh·∫•t</strong> c·ªßa bi·∫øn trong ƒëa th·ª©c sau khi ƒë√£ thu g·ªçn.
                                    </p>
                                </div>

                                <!-- H·ªá s·ªë cao nh·∫•t -->
                                <div class="bg-white/10 backdrop-blur-md border border-white/20 p-6 rounded-2xl hover:bg-white/20 transition duration-300 shadow-lg group">
                                    <div class="flex items-center gap-4 mb-3">
                                        <div class="w-12 h-12 rounded-full bg-teal-500 flex items-center justify-center text-white text-2xl shadow-inner group-hover:scale-110 transition duration-300">üëë</div>
                                        <h4 class="text-xl font-bold text-teal-100">3. H·ªá s·ªë cao nh·∫•t</h4>
                                    </div>
                                    <p class="text-indigo-50 text-lg leading-relaxed">
                                        L√† h·ªá s·ªë c·ªßa h·∫°ng t·ª≠ c√≥ <strong class="text-yellow-300">b·∫≠c cao nh·∫•t</strong>. (L∆∞u √Ω: Kh√¥ng nh·∫•t thi·∫øt ph·∫£i l√† s·ªë l·ªõn nh·∫•t).
                                    </p>
                                </div>

                                <!-- H·ªá s·ªë t·ª± do -->
                                <div class="bg-white/10 backdrop-blur-md border border-white/20 p-6 rounded-2xl hover:bg-white/20 transition duration-300 shadow-lg group">
                                    <div class="flex items-center gap-4 mb-3">
                                        <div class="w-12 h-12 rounded-full bg-orange-500 flex items-center justify-center text-white text-2xl shadow-inner group-hover:scale-110 transition duration-300">üéØ</div>
                                        <h4 class="text-xl font-bold text-orange-100">4. H·ªá s·ªë t·ª± do</h4>
                                    </div>
                                    <p class="text-indigo-50 text-lg leading-relaxed">
                                        L√† h·ªá s·ªë c·ªßa h·∫°ng t·ª≠ <strong class="text-yellow-300">kh√¥ng ch·ª©a bi·∫øn</strong> (t∆∞∆°ng ·ª©ng v·ªõi h·∫°ng t·ª≠ c√≥ b·∫≠c 0).
                                    </p>
                                </div>
                            </div>

                            <!-- Ch√∫ √Ω quan tr·ªçng -->
                            <div class="mt-8 bg-gradient-to-r from-amber-400 to-orange-500 p-1.5 rounded-2xl shadow-xl transform rotate-1 hover:rotate-0 transition duration-300">
                                <div class="bg-[#fffdf5] rounded-xl p-6 h-full border border-amber-100">
                                    <div class="flex flex-col md:flex-row items-center gap-4 md:gap-6">
                                        <div class="flex flex-col items-center justify-center min-w-[120px]">
                                            <span class="text-4xl animate-bounce mb-1">‚ö†Ô∏è</span>
                                            <h4 class="text-xl font-extrabold text-amber-700 uppercase tracking-wide text-center">Ch√∫ √Ω<br>ƒê·∫∑c Bi·ªát</h4>
                                        </div>
                                        <div class="h-16 w-px bg-amber-200 hidden md:block"></div>
                                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 flex-1 w-full">
                                            <div class="bg-white p-4 rounded-xl shadow-sm border-b-4 border-amber-400 flex items-center">
                                                <p class="text-[17px] text-gray-700 leading-snug">M·ªçi <strong>s·ªë th·ª±c kh√°c 0</strong> (VD: 5, -2, ¬Ω) l√† ƒëa th·ª©c <strong class="text-amber-600">b·∫≠c 0</strong>.</p>
                                            </div>
                                            <div class="bg-white p-4 rounded-xl shadow-sm border-b-4 border-red-500 flex items-center">
                                                <p class="text-[17px] text-gray-700 leading-snug">S·ªë <strong class="text-red-600 text-xl">0</strong> l√† ƒëa th·ª©c kh√¥ng, n√≥ <strong class="text-red-600">KH√îNG C√ì B·∫¨C</strong>.</p>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

            </div>

        </div>
    </div>

    <!-- M√†n h√¨nh ch√∫c m·ª´ng (ƒê√£ b·ªã ·∫©n thay b·∫±ng B√≠ k√≠p, gi·ªØ l·∫°i div tr·ªëng ho·∫∑c c√≥ th·ªÉ b·ªè qua) -->
    <div id="celebration" class="fixed inset-0 bg-white/95 z-50 flex flex-col items-center justify-center hidden opacity-0 transition-opacity duration-700">
        <div class="text-8xl mb-6">üéâüéì‚ú®</div>
        <h2 class="text-4xl md:text-5xl font-bold text-green-600 mb-4 text-center px-4">Xu·∫•t s·∫Øc!</h2>
        <p class="text-xl text-gray-600 mb-8 text-center max-w-lg px-4">B·∫°n ƒë√£ tr·ªü th√†nh m·ªôt "Ki·∫øn Tr√∫c S∆∞ ƒêa Th·ª©c" th·ª±c th·ª•. B·∫°n ƒë√£ n·∫Øm v·ªØng c√°ch bi·ªÉu di·ªÖn v√† c√°c th√†nh ph·∫ßn c·ªßa ƒëa th·ª©c 1 bi·∫øn.</p>
        <button onclick="location.reload()" class="bg-indigo-600 hover:bg-indigo-700 text-white font-bold py-3 px-8 rounded-full shadow-lg transition-transform hover:scale-105">
            L√†m l·∫°i th·ª≠ th√°ch üîÑ
        </button>
    </div>

    <script>
        // Data c·∫•u h√¨nh cho tr√≤ ch∆°i
        // P(x) = -3x^4 + 7x^3 + 5x^2 - x + 2
        const pTerms = [
            { id: 't1', display: '-3x‚Å¥', exp: 4, isFirst: true },
            { id: 't2', display: '+ 7x¬≥', exp: 3 },
            { id: 't3', display: '+ 5x¬≤', exp: 2 },
            { id: 't4', display: '- x', exp: 1 },
            { id: 't5', display: '+ 2', exp: 0 }
        ];
        
        let remainingTerms = [];
        let conceptsViewed = { deg: false, lead: false, const: false };

        // Kh·ªüi t·∫°o tr√≤ ch∆°i
        function initGame() {
            remainingTerms = [...pTerms];
            const scArea = document.getElementById('scrambled-terms');
            scArea.innerHTML = '';
            
            // X√°o tr·ªôn m·∫£ng
            const shuffled = [...remainingTerms].sort(() => Math.random() - 0.5);
            
            shuffled.forEach(term => {
                const btn = document.createElement('button');
                // B·ªè d·∫•u c·ªông ·ªü ƒë·∫ßu n·∫øu n√≥ ƒë·ª©ng ƒë·∫ßu l√∫c ƒëang l·ªôn x·ªôn ƒë·ªÉ tr√¥ng t·ª± nhi√™n h∆°n
                let displayStr = term.display;
                if(displayStr.startsWith('+ ')) displayStr = displayStr.substring(2);
                
                btn.className = "bg-white border-2 border-indigo-200 text-indigo-900 text-2xl md:text-3xl font-bold math-text px-6 py-4 rounded-2xl shadow-sm hover:bg-indigo-50 hover:border-indigo-400 hover:scale-110 transition-all focus:outline-none";
                btn.innerText = displayStr;
                btn.onclick = () => handleTermClick(term, btn);
                scArea.appendChild(btn);
            });
        }

        // X·ª≠ l√Ω logic khi b·∫•m v√†o h·∫°ng t·ª≠
        function handleTermClick(term, btnElement) {
            const currentMaxExp = Math.max(...remainingTerms.map(t => t.exp));
            
            if (term.exp === currentMaxExp) {
                // ƒê√öNG: Di chuy·ªÉn h·∫°ng t·ª≠ xu·ªëng b·∫£ng x·∫øp
                document.getElementById('empty-placeholder').style.display = 'none';
                
                const span = document.createElement('span');
                span.className = "px-1 animate-pulse text-indigo-900";
                
                // N·∫øu l√† h·∫°ng t·ª≠ ƒë·∫ßu ti√™n x·∫øp v√†o, b·ªè d·∫•u '+' ƒëi (v√≠ d·ª• thay v√¨ +7x^3 th√¨ ch·ªâ hi·ªán 7x^3 n·∫øu n√≥ l√† l·ªõn nh·∫•t, ·ªü ƒë√¢y -3x^4 c√≥ d·∫•u tr·ª´ n√™n ƒë·ªÉ nguy√™n)
                if (term.isFirst) {
                    span.innerText = term.display; 
                } else {
                    span.innerText = term.display;
                }
                
                document.getElementById('arranged-terms').appendChild(span);
                
                setTimeout(() => span.classList.remove('animate-pulse'), 800);

                // Hi·ªáu ·ª©ng thu nh·ªè v√† bi·∫øn m·∫•t n√∫t ·ªü tr√™n
                btnElement.style.transform = 'scale(0)';
                btnElement.style.opacity = '0';
                setTimeout(() => btnElement.remove(), 300);

                // Lo·∫°i kh·ªèi m·∫£ng ch·ªù
                remainingTerms = remainingTerms.filter(t => t.id !== term.id);

                // N·∫øu ƒë√£ x·∫øp xong h·∫øt
                if (remainingTerms.length === 0) {
                    setTimeout(() => {
                        document.getElementById('sort-game').classList.add('opacity-40', 'pointer-events-none');
                        showAnalysisBoard();
                    }, 800);
                    showConfetti(30);
                }
            } else {
                // SAI: B√°o l·ªói rung l·∫Øc
                btnElement.classList.add('animate-shake', 'border-red-500', 'bg-red-50', 'text-red-700');
                showErrorMessage("Sai r·ªìi! H√£y ch·ªçn h·∫°ng t·ª≠ c√≥ <strong>S·ªê M≈® L·ªöN NH·∫§T</strong> trong c√°c s·ªë c√≤n l·∫°i. ‚ùå");
                setTimeout(() => {
                    btnElement.classList.remove('animate-shake', 'border-red-500', 'bg-red-50', 'text-red-700');
                }, 500);
            }
        }

        function showAnalysisBoard() {
            const board = document.getElementById('analysis-board');
            board.classList.remove('hidden');
            setTimeout(() => {
                board.scrollIntoView({ behavior: 'smooth', block: 'start' });
            }, 100);
        }

        // X·ª≠ l√Ω highlight kh√°i ni·ªám
        function highlightConcept(type) {
            // ƒê√°nh d·∫•u ƒë√£ xem
            conceptsViewed[type] = true;
            
            // Check xem ƒë√£ b·∫•m ƒë·ªß 3 n√∫t ch∆∞a ƒë·ªÉ hi·ªán n√∫t Ho√†n th√†nh
            if(conceptsViewed.deg && conceptsViewed.lead && conceptsViewed.const) {
                document.getElementById('finish-btn-container').classList.remove('hidden');
            }

            // Reset t·∫•t c·∫£ highlight
            document.getElementById('val-deg').className = "transition-highlight";
            document.getElementById('val-lead').className = "transition-highlight";
            document.getElementById('term-const').className = "px-2 transition-highlight";
            
            // L·∫•y c√°c ph·∫ßn t·ª≠ c·∫ßn update m√†u s·∫Øc
            const desc = document.getElementById('concept-desc');
            const equationSpans = document.querySelectorAll('#term-highest ~ span:not(#term-const)'); // Nh·ªØng th·∫ª span m·ªù ƒëi
            
            // ƒê∆∞a c√°c th·∫ª x√°m l·∫°i b√¨nh th∆∞·ªùng tr∆∞·ªõc khi √°p d·ª•ng hi·ªáu ·ª©ng m·ªõi
            equationSpans.forEach(s => s.classList.add('text-gray-400'));
            
            if (type === 'deg') {
                document.getElementById('val-deg').className = "bg-blue-200 text-blue-900 px-2 rounded-lg shadow-lg scale-150 inline-block z-10 relative font-bold transition-highlight border-2 border-blue-400 -translate-y-2";
                
                desc.innerHTML = `
                    <div>
                        <strong class='text-blue-700 text-2xl block mb-3'>B·∫≠c c·ªßa ƒëa th·ª©c = 4</strong> 
                        <span class="text-gray-700">B·∫≠c c·ªßa ƒëa th·ª©c m·ªôt bi·∫øn l√† <strong>s·ªë m≈© cao nh·∫•t</strong> c·ªßa bi·∫øn trong ƒëa th·ª©c ƒë√£ thu g·ªçn. Trong <span class="math-text">P(x)</span>, s·ªë m≈© cao nh·∫•t l√† 4.</span>
                    </div>`;
                desc.className = "min-h-[120px] bg-blue-50 p-6 rounded-2xl border-2 border-blue-200 shadow-md flex items-center justify-center text-center text-lg transition-all duration-300 transform scale-105";

            } else if (type === 'lead') {
                document.getElementById('val-lead').className = "bg-teal-200 text-teal-900 px-2 rounded-lg shadow-lg scale-125 inline-block z-10 relative font-bold transition-highlight border-2 border-teal-400";
                
                desc.innerHTML = `
                    <div>
                        <strong class='text-teal-700 text-2xl block mb-3'>H·ªá s·ªë cao nh·∫•t = -3</strong> 
                        <span class="text-gray-700">L√† h·ªá s·ªë c·ªßa h·∫°ng t·ª≠ c√≥ b·∫≠c cao nh·∫•t. ƒê·ª´ng qu√™n mang theo c·∫£ <strong>d·∫•u √¢m (-)</strong> ph√≠a tr∆∞·ªõc s·ªë 3 nh√©!</span>
                    </div>`;
                desc.className = "min-h-[120px] bg-teal-50 p-6 rounded-2xl border-2 border-teal-200 shadow-md flex items-center justify-center text-center text-lg transition-all duration-300 transform scale-105";

            } else if (type === 'const') {
                document.getElementById('term-const').className = "bg-amber-200 text-amber-900 px-3 py-1 rounded-lg shadow-lg scale-125 inline-block z-10 relative font-bold transition-highlight border-2 border-amber-400";
                
                desc.innerHTML = `
                    <div>
                        <strong class='text-amber-700 text-2xl block mb-3'>H·ªá s·ªë t·ª± do = 2</strong> 
                        <span class="text-gray-700">L√† h·ªá s·ªë c·ªßa h·∫°ng t·ª≠ <strong>kh√¥ng ch·ª©a bi·∫øn</strong> (hay ch√≠nh l√† h·∫°ng t·ª≠ c√≥ b·∫≠c b·∫±ng 0). ·ªû ƒë√¢y l√† s·ªë 2.</span>
                    </div>`;
                desc.className = "min-h-[120px] bg-amber-50 p-6 rounded-2xl border-2 border-amber-200 shadow-md flex items-center justify-center text-center text-lg transition-all duration-300 transform scale-105";
            }
        }

        // --- C√ÅC H√ÄM CHO TH·ª∞C H√ÄNH 2 ---
        function startPractice() {
            const pracSection = document.getElementById('practice-section');
            pracSection.classList.remove('hidden');
            document.getElementById('finish-btn-container').classList.add('hidden');
            
            setTimeout(() => {
                pracSection.scrollIntoView({ behavior: 'smooth', block: 'start' });
            }, 100);
        }

        function checkPracticeAnswers() {
            // H·ªá s·ªë ƒëa th·ª©c r√∫t g·ªçn
            const c4 = parseInt(document.getElementById('coef-4').value);
            const c3 = parseInt(document.getElementById('coef-3').value);
            const c2 = parseInt(document.getElementById('coef-2').value);
            const c1 = parseInt(document.getElementById('coef-1').value);
            const c0 = parseInt(document.getElementById('coef-0').value);
            
            // C√°c th√¥ng s·ªë
            const deg = parseInt(document.getElementById('ans-deg').value);
            const lead = parseInt(document.getElementById('ans-lead').value);
            const constant = parseInt(document.getElementById('ans-const').value);

            let isCorrect = true;
            let errMsg = "<ul class='text-left list-disc ml-6 mt-2 space-y-1'>";

            if (isNaN(c4) || isNaN(c3) || isNaN(c2) || isNaN(c1) || isNaN(c0) || isNaN(deg) || isNaN(lead) || isNaN(constant)) {
                showErrorMessage("Vui l√≤ng ƒëi·ªÅn ƒë·∫ßy ƒë·ªß t·∫•t c·∫£ c√°c √¥ tr·ªëng! ‚ö†Ô∏è");
                return;
            }

            // ƒê√°p √°n Q(x) r√∫t g·ªçn l√†: 0x‚Å¥ + 2x¬≥ - 5x¬≤ + 8x - 3
            if (c4 !== 0 || c3 !== 2 || c2 !== -5 || c1 !== 8 || c0 !== -3) { 
                isCorrect = false; 
                errMsg += "<li>K·∫øt qu·∫£ r√∫t g·ªçn ƒëa th·ª©c ch∆∞a ƒë√∫ng. H√£y ki·ªÉm tra l·∫°i c√°c h·ªá s·ªë (l∆∞u √Ω d·∫•u √¢m, v√† h·∫°ng t·ª≠ b·ªã tri·ªát ti√™u th√¨ h·ªá s·ªë b·∫±ng bao nhi√™u?).</li>"; 
            }
            if (deg !== 3) { isCorrect = false; errMsg += "<li>B·∫≠c c·ªßa Q(x) ch∆∞a ƒë√∫ng. (Sau khi r√∫t g·ªçn, bi·∫øn c√≥ s·ªë m≈© cao nh·∫•t l√† bao nhi√™u?)</li>"; }
            if (lead !== 2) { isCorrect = false; errMsg += "<li>H·ªá s·ªë cao nh·∫•t ch∆∞a ƒë√∫ng. Nh·ªõ l·∫°i ƒë·ªãnh nghƒ©a: N√≥ l√† h·ªá s·ªë c·ªßa h·∫°ng t·ª≠ b·∫≠c cao nh·∫•t, kh√¥ng ph·∫£i l√† s·ªë c√≥ gi√° tr·ªã l·ªõn nh·∫•t!</li>"; }
            if (constant !== -3) { isCorrect = false; errMsg += "<li>H·ªá s·ªë t·ª± do ch∆∞a ƒë√∫ng.</li>"; }

            errMsg += "</ul>";

            if (isCorrect) {
                finishLesson();
            } else {
                showErrorMessage("<div class='font-bold'>Ch∆∞a ch√≠nh x√°c:</div>" + errMsg);
            }
        }

        function finishLesson() {
            // Hi·ªÉn th·ªã B√≠ K√≠p thay v√¨ m√†n h√¨nh ch√∫c m·ª´ng
            const notes = document.getElementById('secret-notes');
            notes.classList.remove('hidden');
            
            // ƒê·ªïi tr·∫°ng th√°i n√∫t N·ªôp b√†i
            const submitBtn = document.querySelector('#prac-quiz button');
            if(submitBtn) {
                submitBtn.innerHTML = "ƒê√£ ho√†n th√†nh xu·∫•t s·∫Øc! üéâ";
                submitBtn.classList.replace('bg-indigo-600', 'bg-green-600');
                submitBtn.classList.replace('hover:bg-indigo-700', 'hover:bg-green-700');
                submitBtn.onclick = null;
                submitBtn.style.cursor = 'default';
                submitBtn.classList.remove('hover:scale-105');
            }

            setTimeout(() => {
                notes.classList.remove('opacity-0', 'translate-y-10');
                notes.scrollIntoView({ behavior: 'smooth', block: 'center' });
            }, 50);
            
            // B·∫Øn ph√°o hoa li√™n t·ª•c
            let shots = 0;
            const interval = setInterval(() => {
                showConfetti(40);
                shots++;
                if(shots > 5) clearInterval(interval);
            }, 400);
        }

        // --- TI·ªÜN √çCH ---
        function showErrorMessage(htmlText) {
            // X√≥a message c≈© n·∫øu c√≥
            const oldMsg = document.getElementById('error-toast');
            if (oldMsg) oldMsg.remove();

            const message = document.createElement('div');
            message.id = 'error-toast';
            message.innerHTML = htmlText;
            message.className = "fixed top-10 left-1/2 transform -translate-x-1/2 bg-red-600 text-white px-8 py-4 rounded-2xl shadow-2xl transition-all duration-300 z-50 text-center w-11/12 max-w-md flex items-center justify-center gap-3 text-lg";
            
            // Th√™m animation tr∆∞·ª£t xu·ªëng
            message.animate([
                { top: '-50px', opacity: 0 },
                { top: '40px', opacity: 1 }
            ], { duration: 300, fill: 'forwards', easing: 'ease-out' });

            document.body.appendChild(message);
            
            setTimeout(() => {
                message.animate([
                    { top: '40px', opacity: 1 },
                    { top: '-50px', opacity: 0 }
                ], { duration: 300, fill: 'forwards', easing: 'ease-in' }).onfinish = () => message.remove();
            }, 3000);
        }

        function showConfetti(count = 30) {
            const colors = ['#4f46e5', '#10b981', '#f59e0b', '#ec4899', '#06b6d4'];
            for(let i=0; i<count; i++) {
                const conf = document.createElement('div');
                conf.className = "fixed pointer-events-none z-[60]";
                conf.style.left = Math.random() * 100 + 'vw';
                conf.style.top = '-20px';
                
                // Random h√¨nh d·∫°ng (vu√¥ng ho·∫∑c tr√≤n)
                const size = Math.random() * 12 + 6;
                conf.style.width = size + 'px';
                conf.style.height = size + 'px';
                conf.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                conf.style.borderRadius = Math.random() > 0.5 ? "50%" : "3px";
                
                document.body.appendChild(conf);
                
                const duration = 1500 + Math.random() * 2000;
                const anim = conf.animate([
                    { transform: 'translate3d(0,0,0) rotate(0deg)', opacity: 1 },
                    { transform: `translate3d(${Math.random()*200 - 100}px, 100vh, 0) rotate(${Math.random() * 720}deg)`, opacity: 0 }
                ], { 
                    duration: duration, 
                    easing: 'cubic-bezier(.37,0,.63,1)' 
                });
                anim.onfinish = () => conf.remove();
            }
        }

        // Kh·ªüi ƒë·ªông khi load trang
        window.onload = initGame;
    </script>
</body>
</html>
