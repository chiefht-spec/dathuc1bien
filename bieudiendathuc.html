<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bi·ªÉu Di·ªÖn ƒêa Th·ª©c - Th·ª≠ Th√°ch N√¢ng Cao</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700;800&family=Space+Mono:wght@400;700&display=swap');
        
        body {
            font-family: 'Nunito', sans-serif;
            background-color: #f0fdf4; /* N·ªÅn xanh nh·∫°t th√¢n thi·ªán */
        }
        
        .math-text {
            font-family: 'Space Mono', monospace;
        }

        .blueprint-bg {
            background-color: #ffffff;
            background-image: 
                linear-gradient(rgba(34, 197, 94, 0.1) 1px, transparent 1px),
                linear-gradient(90deg, rgba(34, 197, 94, 0.1) 1px, transparent 1px);
            background-size: 20px 20px;
        }

        /* ·∫®n m≈©i t√™n tƒÉng gi·∫£m c·ªßa √¥ input number */
        input[type=number]::-webkit-inner-spin-button, 
        input[type=number]::-webkit-outer-spin-button { 
            -webkit-appearance: none; 
            margin: 0; 
        }
        input[type=number] {
            -moz-appearance: textfield;
        }
    </style>
</head>
<body class="min-h-screen text-gray-800 py-8 px-4 sm:px-6 lg:px-8">

    <div class="max-w-4xl mx-auto space-y-10">
        
        <!-- Header -->
        <header class="text-center mb-10">
            <h1 class="text-4xl md:text-5xl font-extrabold text-green-700 mb-4 tracking-tight">Bi·ªÉu Di·ªÖn ƒêa Th·ª©c üöÄ</h1>
            <p class="text-xl text-gray-600">Thu g·ªçn, s·∫Øp x·∫øp v√† x√°c ƒë·ªãnh c√°c h·ªá s·ªë</p>
        </header>

        <!-- ================= KHU V·ª∞C 1: PH·∫¶N TR∆Ø·ªöC TH·ª¨ TH√ÅCH ================= -->
        <section id="explore-section" class="bg-white p-6 md:p-10 rounded-3xl shadow-xl border-t-8 border-blue-500 transition-all duration-500">
            <div class="flex items-center gap-4 mb-6">
                <div class="bg-blue-100 p-3 rounded-full text-blue-600 text-2xl">üìö</div>
                <h2 class="text-2xl md:text-3xl font-bold text-blue-700">Ho·∫°t ƒê·ªông 1: S·∫Øp X·∫øp ƒêa Th·ª©c</h2>
            </div>
            
            <div class="bg-blue-50 p-6 md:p-8 rounded-2xl border border-blue-100 text-center">
                <p class="text-gray-700 text-lg mb-4">
                    Cho ƒëa th·ª©c: <strong class="math-text text-xl md:text-2xl text-blue-800 bg-white px-4 py-2 rounded-lg shadow-sm border border-blue-200 inline-block mt-2">P(x) = 5x¬≤ - 3x‚Å¥ + 2 - x + 7x¬≥</strong>
                </p>
                <p class="text-gray-600 mb-8 text-md md:text-lg">
                    H√£y b·∫•m v√†o c√°c th·∫ª d∆∞·ªõi ƒë√¢y ƒë·ªÉ ƒë∆∞a ch√∫ng v√†o √¥ tr·ªëng theo th·ª© t·ª± <strong>l≈©y th·ª´a gi·∫£m d·∫ßn</strong> c·ªßa bi·∫øn x.
                </p>
                
                <!-- Ngu·ªìn c√°c th·∫ª -->
                <div id="source-pool" class="flex flex-wrap justify-center gap-3 mb-8 min-h-[60px]">
                    <button id="btn-t1" onclick="pickTerm(this)" data-val="5x2" class="px-5 py-3 bg-white border-2 border-blue-400 text-blue-700 font-bold rounded-xl shadow-md hover:bg-blue-100 transition transform hover:scale-105 active:scale-95 math-text text-lg cursor-pointer">+ 5x¬≤</button>
                    <button id="btn-t2" onclick="pickTerm(this)" data-val="-3x4" class="px-5 py-3 bg-white border-2 border-blue-400 text-blue-700 font-bold rounded-xl shadow-md hover:bg-blue-100 transition transform hover:scale-105 active:scale-95 math-text text-lg cursor-pointer">- 3x‚Å¥</button>
                    <button id="btn-t3" onclick="pickTerm(this)" data-val="2" class="px-5 py-3 bg-white border-2 border-blue-400 text-blue-700 font-bold rounded-xl shadow-md hover:bg-blue-100 transition transform hover:scale-105 active:scale-95 math-text text-lg cursor-pointer">+ 2</button>
                    <button id="btn-t4" onclick="pickTerm(this)" data-val="-x" class="px-5 py-3 bg-white border-2 border-blue-400 text-blue-700 font-bold rounded-xl shadow-md hover:bg-blue-100 transition transform hover:scale-105 active:scale-95 math-text text-lg cursor-pointer">- x</button>
                    <button id="btn-t5" onclick="pickTerm(this)" data-val="7x3" class="px-5 py-3 bg-white border-2 border-blue-400 text-blue-700 font-bold rounded-xl shadow-md hover:bg-blue-100 transition transform hover:scale-105 active:scale-95 math-text text-lg cursor-pointer">+ 7x¬≥</button>
                </div>

                <!-- √î ƒë√≠ch -->
                <div class="flex flex-col md:flex-row items-center justify-center gap-4 mb-6 text-xl math-text font-bold">
                    <span class="text-gray-700 hidden md:inline">P(x) = </span>
                    <div id="target-slots" class="flex flex-wrap justify-center gap-2">
                        <div onclick="returnTerm(this)" class="slot w-16 h-14 md:w-20 md:h-16 border-2 border-dashed border-blue-400 rounded-xl flex items-center justify-center cursor-pointer bg-blue-50/50 hover:bg-red-50 transition overflow-hidden" data-filled="false"></div>
                        <div onclick="returnTerm(this)" class="slot w-16 h-14 md:w-20 md:h-16 border-2 border-dashed border-blue-400 rounded-xl flex items-center justify-center cursor-pointer bg-blue-50/50 hover:bg-red-50 transition overflow-hidden" data-filled="false"></div>
                        <div onclick="returnTerm(this)" class="slot w-16 h-14 md:w-20 md:h-16 border-2 border-dashed border-blue-400 rounded-xl flex items-center justify-center cursor-pointer bg-blue-50/50 hover:bg-red-50 transition overflow-hidden" data-filled="false"></div>
                        <div onclick="returnTerm(this)" class="slot w-16 h-14 md:w-20 md:h-16 border-2 border-dashed border-blue-400 rounded-xl flex items-center justify-center cursor-pointer bg-blue-50/50 hover:bg-red-50 transition overflow-hidden" data-filled="false"></div>
                        <div onclick="returnTerm(this)" class="slot w-16 h-14 md:w-20 md:h-16 border-2 border-dashed border-blue-400 rounded-xl flex items-center justify-center cursor-pointer bg-blue-50/50 hover:bg-red-50 transition overflow-hidden" data-filled="false"></div>
                    </div>
                </div>

                <!-- N√∫t ki·ªÉm tra v√† Th√¥ng b√°o -->
                <div id="act1-msg" class="min-h-[2rem] mb-4 text-md font-bold transition-all"></div>
                
                <button id="check-act1-btn" onclick="checkActivity1()" class="bg-blue-600 text-white px-8 py-3 rounded-full font-bold hover:bg-blue-700 hover:shadow-lg transform transition hover:-translate-y-1 w-full md:w-auto">
                    Ki·ªÉm Tra S·∫Øp X·∫øp ‚ú®
                </button>
                
                <button id="next-act-btn" onclick="document.getElementById('practice-section').scrollIntoView({behavior: 'smooth'})" class="hidden mt-4 mx-auto bg-green-500 text-white px-8 py-3 rounded-full font-bold hover:bg-green-600 hover:shadow-lg transform transition hover:-translate-y-1 animate-bounce w-full md:w-auto">
                    Ch√≠nh x√°c! T·ªõi Th·ª≠ Th√°ch N√¢ng Cao üëá
                </button>
            </div>
        </section>

        <!-- ================= KHU V·ª∞C 2: TH·ª∞C H√ÄNH N√ÇNG CAO ================= -->
        <section id="practice-section" class="bg-white p-6 md:p-10 rounded-3xl shadow-xl border-t-8 border-green-500 transition-all duration-500">
            <div class="text-center mb-8">
                <h2 class="text-2xl md:text-3xl font-bold text-green-700 mb-3">Th·ª±c H√†nh 2: Th·ª≠ Th√°ch N√¢ng Cao üéØ</h2>
                <div class="bg-green-50 inline-block px-6 py-4 rounded-2xl border border-green-200 shadow-sm mt-4 w-full md:w-auto">
                    <p class="text-gray-700 text-lg mb-2">Cho ƒëa th·ª©c:</p>
                    <p class="math-text font-bold text-2xl md:text-3xl text-green-600 break-words">Q(x) = 4x‚Å¥ - 3x¬≥ - x¬≤ + 2x + 1 - 4x‚Å¥ + 5x¬≥ - 4x¬≤ + 6x - 4</p>
                </div>
                
                <div class="mt-8 space-y-3 text-left max-w-2xl mx-auto bg-indigo-50 p-6 rounded-xl border border-indigo-100">
                    <p class="font-bold text-indigo-800 text-lg border-b border-indigo-200 pb-2">Nhi·ªám v·ª• c·ªßa b·∫°n:</p>
                    <ol class="list-decimal ml-6 text-gray-800 space-y-2 text-md md:text-lg">
                        <li><strong class="text-indigo-600">R√∫t g·ªçn</strong> ƒëa th·ª©c Q(x) ra gi·∫•y nh√°p.</li>
                        <li><strong>ƒêi·ªÅn c√°c h·ªá s·ªë</strong> c·ªßa ƒëa th·ª©c sau khi r√∫t g·ªçn v√†o bi·ªÉu th·ª©c b√™n d∆∞·ªõi.</li>
                        <li>X√°c ƒë·ªãnh c√°c th√¥ng s·ªë: B·∫≠c, H·ªá s·ªë cao nh·∫•t, H·ªá s·ªë t·ª± do.</li>
                    </ol>
                </div>
            </div>

            <!-- V√πng ƒëi·ªÅn khuy·∫øt h·ªá s·ªë r√∫t g·ªçn -->
            <div class="blueprint-bg border-2 border-dashed border-green-400 rounded-2xl p-6 md:p-10 flex flex-col items-center justify-center relative shadow-inner mb-10">
                <div class="absolute top-0 left-1/2 transform -translate-x-1/2 -translate-y-1/2 bg-green-500 text-white px-4 py-1 rounded-full font-bold uppercase tracking-widest text-xs md:text-sm shadow-md">
                    K·∫øt Qu·∫£ R√∫t G·ªçn Q(x)
                </div>
                
                <div class="flex flex-wrap gap-2 md:gap-4 items-baseline justify-center text-xl md:text-3xl math-text font-bold text-gray-800 mt-6 w-full">
                    <span class="text-green-700">Q(x) = </span>
                    
                    <!-- B·∫≠c 4 -->
                    <div class="flex items-baseline group">
                        <input type="number" id="coef-4" placeholder="?" class="w-12 md:w-16 text-center border-b-4 border-gray-300 bg-transparent outline-none focus:border-green-600 text-indigo-700 py-1 transition-colors">
                        <span class="ml-1 text-gray-600 group-hover:text-green-600 transition-colors">x‚Å¥</span>
                    </div>
                    
                    <span class="text-gray-400">+</span>

                    <!-- B·∫≠c 3 -->
                    <div class="flex items-baseline group">
                        <input type="number" id="coef-3" placeholder="?" class="w-12 md:w-16 text-center border-b-4 border-gray-300 bg-transparent outline-none focus:border-green-600 text-indigo-700 py-1 transition-colors">
                        <span class="ml-1 text-gray-600 group-hover:text-green-600 transition-colors">x¬≥</span>
                    </div>
                    
                    <span class="text-gray-400">+</span>
                    
                    <!-- B·∫≠c 2 -->
                    <div class="flex items-baseline group">
                        <input type="number" id="coef-2" placeholder="?" class="w-12 md:w-16 text-center border-b-4 border-gray-300 bg-transparent outline-none focus:border-green-600 text-indigo-700 py-1 transition-colors">
                        <span class="ml-1 text-gray-600 group-hover:text-green-600 transition-colors">x¬≤</span>
                    </div>
                    
                    <span class="text-gray-400">+</span>
                    
                    <!-- B·∫≠c 1 -->
                    <div class="flex items-baseline group">
                        <input type="number" id="coef-1" placeholder="?" class="w-12 md:w-16 text-center border-b-4 border-gray-300 bg-transparent outline-none focus:border-green-600 text-indigo-700 py-1 transition-colors">
                        <span class="ml-1 text-gray-600 group-hover:text-green-600 transition-colors">x</span>
                    </div>
                    
                    <span class="text-gray-400">+</span>
                    
                    <!-- B·∫≠c 0 (T·ª± do) -->
                    <div class="flex items-baseline group">
                        <input type="number" id="coef-0" placeholder="?" class="w-12 md:w-16 text-center border-b-4 border-gray-300 bg-transparent outline-none focus:border-green-600 text-indigo-700 py-1 transition-colors">
                    </div>
                </div>
                <p class="text-sm md:text-base text-gray-500 mt-6 italic text-center bg-white/80 px-4 py-2 rounded-lg">
                    * L∆∞u √Ω: ƒêi·ªÅn s·ªë √¢m n·∫øu c·∫ßn (VD: -5). N·∫øu h·∫°ng t·ª≠ b·ªã tri·ªát ti√™u, h√£y ƒëi·ªÅn s·ªë 0.
                </p>
            </div>

            <!-- Form Tr·∫£ l·ªùi th√¥ng s·ªë -->
            <div class="grid grid-cols-1 md:grid-cols-3 gap-6 mb-10">
                <!-- B·∫≠c -->
                <div class="bg-gray-50 p-4 rounded-xl border border-gray-200 focus-within:border-green-500 focus-within:ring-2 focus-within:ring-green-200 transition-all">
                    <label class="block text-sm font-bold text-gray-700 mb-2 uppercase tracking-wide">B·∫≠c c·ªßa ƒëa th·ª©c</label>
                    <input type="number" id="ans-deg" placeholder="Nh·∫≠p b·∫≠c..." class="w-full text-lg p-2 border border-gray-300 rounded-lg outline-none focus:border-green-500 font-bold text-green-700 math-text">
                </div>
                <!-- H·ªá s·ªë cao nh·∫•t -->
                <div class="bg-gray-50 p-4 rounded-xl border border-gray-200 focus-within:border-green-500 focus-within:ring-2 focus-within:ring-green-200 transition-all">
                    <label class="block text-sm font-bold text-gray-700 mb-2 uppercase tracking-wide">H·ªá s·ªë cao nh·∫•t</label>
                    <input type="number" id="ans-lead" placeholder="Nh·∫≠p h·ªá s·ªë..." class="w-full text-lg p-2 border border-gray-300 rounded-lg outline-none focus:border-green-500 font-bold text-green-700 math-text">
                </div>
                <!-- H·ªá s·ªë t·ª± do -->
                <div class="bg-gray-50 p-4 rounded-xl border border-gray-200 focus-within:border-green-500 focus-within:ring-2 focus-within:ring-green-200 transition-all">
                    <label class="block text-sm font-bold text-gray-700 mb-2 uppercase tracking-wide">H·ªá s·ªë t·ª± do</label>
                    <input type="number" id="ans-const" placeholder="Nh·∫≠p h·ªá s·ªë..." class="w-full text-lg p-2 border border-gray-300 rounded-lg outline-none focus:border-green-500 font-bold text-green-700 math-text">
                </div>
            </div>

            <!-- N√∫t Ki·ªÉm Tra -->
            <div class="text-center" id="action-buttons">
                <button onclick="checkPracticeAnswers()" class="bg-green-600 hover:bg-green-500 text-white font-bold py-4 px-10 rounded-full text-xl shadow-lg transform transition hover:scale-105 active:scale-95 w-full md:w-auto">
                    Ki·ªÉm Tra ƒê√°p √Ån üöÄ
                </button>
            </div>

            <!-- Khu v·ª±c th√¥ng b√°o l·ªói -->
            <div id="message-area" class="mt-8 hidden">
                <div id="error-box" class="hidden bg-red-50 border-l-4 border-red-500 p-4 rounded-r-lg">
                    <div class="flex items-start">
                        <div class="flex-shrink-0">
                            <svg class="h-6 w-6 text-red-500" fill="none" viewBox="0 0 24 24" stroke="currentColor">
                                <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z" />
                            </svg>
                        </div>
                        <div class="ml-3 w-full">
                            <h3 class="text-lg font-bold text-red-800">Ch∆∞a ch√≠nh x√°c</h3>
                            <div id="error-text" class="mt-2 text-sm text-red-700"></div>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <!-- ================= KHU V·ª∞C 3: B√ç K√çP GHI V·ªû (·∫®n l√∫c ƒë·∫ßu) ================= -->
        <section id="secret-notes" class="hidden max-w-4xl mx-auto transform transition-all duration-1000 translate-y-10 opacity-0 mb-10">
            <div class="bg-gradient-to-br from-indigo-900 via-indigo-800 to-purple-900 rounded-3xl shadow-2xl overflow-hidden relative border-4 border-indigo-300/30">
                <!-- Decorative backgrounds -->
                <div class="absolute top-0 right-0 -mt-10 -mr-10 w-40 h-40 bg-white opacity-10 rounded-full blur-2xl pointer-events-none"></div>
                <div class="absolute bottom-0 left-0 -mb-10 -ml-10 w-56 h-56 bg-purple-500 opacity-20 rounded-full blur-3xl pointer-events-none"></div>
                
                <div class="p-8 md:p-12 relative z-10">
                    <div class="text-center mb-10">
                        <div class="inline-flex items-center justify-center w-20 h-20 bg-white rounded-full shadow-[0_0_20px_rgba(255,255,255,0.3)] mb-4 transform -rotate-6 hover:rotate-0 transition duration-300">
                            <span class="text-5xl drop-shadow-md">üìì</span>
                        </div>
                        <h3 class="text-3xl md:text-4xl font-extrabold text-transparent bg-clip-text bg-gradient-to-r from-yellow-300 to-yellow-100 uppercase tracking-widest drop-shadow-sm" style="font-family: 'Times New Roman', serif;">B√≠ K√≠p Ghi V·ªü</h3>
                        <p class="text-indigo-200 mt-2 text-lg italic">Tuy·ªát v·ªùi! B·∫°n ƒë√£ v∆∞·ª£t qua th·ª≠ th√°ch. H√£y ghi nh·ªõ c√°c ki·∫øn th·ª©c sau:</p>
                    </div>
                    
                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                        <!-- S·∫Øp x·∫øp -->
                        <div class="bg-white/10 backdrop-blur-md border border-white/20 p-6 rounded-2xl hover:bg-white/20 transition duration-300 shadow-lg group">
                            <div class="flex items-center gap-4 mb-3">
                                <div class="w-12 h-12 rounded-full bg-blue-500 flex items-center justify-center text-white text-2xl shadow-inner group-hover:scale-110 transition duration-300">üîÑ</div>
                                <h4 class="text-xl font-bold text-blue-100">1. S·∫Øp x·∫øp ƒëa th·ª©c</h4>
                            </div>
                            <p class="text-indigo-50 text-lg leading-relaxed">
                                C·∫ßn <strong class="text-yellow-300">thu g·ªçn ƒëa th·ª©c tr∆∞·ªõc</strong>, sau ƒë√≥ x·∫øp c√°c h·∫°ng t·ª≠ theo lu·ªπ th·ª´a <strong class="text-white">gi·∫£m d·∫ßn</strong> (ho·∫∑c tƒÉng d·∫ßn) c·ªßa bi·∫øn.
                            </p>
                        </div>

                        <!-- B·∫≠c -->
                        <div class="bg-white/10 backdrop-blur-md border border-white/20 p-6 rounded-2xl hover:bg-white/20 transition duration-300 shadow-lg group">
                            <div class="flex items-center gap-4 mb-3">
                                <div class="w-12 h-12 rounded-full bg-pink-500 flex items-center justify-center text-white text-2xl shadow-inner group-hover:scale-110 transition duration-300">üìà</div>
                                <h4 class="text-xl font-bold text-pink-100">2. B·∫≠c c·ªßa ƒëa th·ª©c</h4>
                            </div>
                            <p class="text-indigo-50 text-lg leading-relaxed">
                                L√† <strong class="text-yellow-300">s·ªë m≈© cao nh·∫•t</strong> c·ªßa bi·∫øn trong ƒëa th·ª©c sau khi ƒë√£ thu g·ªçn.
                            </p>
                        </div>

                        <!-- H·ªá s·ªë cao nh·∫•t -->
                        <div class="bg-white/10 backdrop-blur-md border border-white/20 p-6 rounded-2xl hover:bg-white/20 transition duration-300 shadow-lg group">
                            <div class="flex items-center gap-4 mb-3">
                                <div class="w-12 h-12 rounded-full bg-teal-500 flex items-center justify-center text-white text-2xl shadow-inner group-hover:scale-110 transition duration-300">üëë</div>
                                <h4 class="text-xl font-bold text-teal-100">3. H·ªá s·ªë cao nh·∫•t</h4>
                            </div>
                            <p class="text-indigo-50 text-lg leading-relaxed">
                                L√† h·ªá s·ªë c·ªßa h·∫°ng t·ª≠ c√≥ <strong class="text-yellow-300">b·∫≠c cao nh·∫•t</strong>. (L∆∞u √Ω: Kh√¥ng nh·∫•t thi·∫øt ph·∫£i l√† s·ªë l·ªõn nh·∫•t).
                            </p>
                        </div>

                        <!-- H·ªá s·ªë t·ª± do -->
                        <div class="bg-white/10 backdrop-blur-md border border-white/20 p-6 rounded-2xl hover:bg-white/20 transition duration-300 shadow-lg group">
                            <div class="flex items-center gap-4 mb-3">
                                <div class="w-12 h-12 rounded-full bg-orange-500 flex items-center justify-center text-white text-2xl shadow-inner group-hover:scale-110 transition duration-300">üéØ</div>
                                <h4 class="text-xl font-bold text-orange-100">4. H·ªá s·ªë t·ª± do</h4>
                            </div>
                            <p class="text-indigo-50 text-lg leading-relaxed">
                                L√† h·ªá s·ªë c·ªßa h·∫°ng t·ª≠ <strong class="text-yellow-300">kh√¥ng ch·ª©a bi·∫øn</strong> (t∆∞∆°ng ·ª©ng v·ªõi h·∫°ng t·ª≠ c√≥ b·∫≠c 0).
                            </p>
                        </div>
                    </div>

                    <!-- Ch√∫ √Ω quan tr·ªçng -->
                    <div class="mt-8 bg-gradient-to-r from-amber-400 to-orange-500 p-1.5 rounded-2xl shadow-xl transform rotate-1 hover:rotate-0 transition duration-300">
                        <div class="bg-[#fffdf5] rounded-xl p-6 h-full border border-amber-100">
                            <div class="flex flex-col md:flex-row items-center gap-4 md:gap-6">
                                <div class="flex flex-col items-center justify-center min-w-[120px]">
                                    <span class="text-4xl animate-bounce mb-1">‚ö†Ô∏è</span>
                                    <h4 class="text-xl font-extrabold text-amber-700 uppercase tracking-wide text-center">Ch√∫ √Ω<br>ƒê·∫∑c Bi·ªát</h4>
                                </div>
                                <div class="h-16 w-px bg-amber-200 hidden md:block"></div>
                                <div class="grid grid-cols-1 md:grid-cols-2 gap-4 flex-1 w-full">
                                    <div class="bg-white p-4 rounded-xl shadow-sm border-b-4 border-amber-400 flex items-center">
                                        <p class="text-[17px] text-gray-700 leading-snug">M·ªçi <strong>s·ªë th·ª±c kh√°c 0</strong> (VD: 5, -2, ¬Ω) l√† ƒëa th·ª©c <strong class="text-amber-600">b·∫≠c 0</strong>.</p>
                                    </div>
                                    <div class="bg-white p-4 rounded-xl shadow-sm border-b-4 border-red-500 flex items-center">
                                        <p class="text-[17px] text-gray-700 leading-snug">S·ªë <strong class="text-red-600 text-xl">0</strong> l√† ƒëa th·ª©c kh√¥ng, n√≥ <strong class="text-red-600">KH√îNG C√ì B·∫¨C</strong>.</p>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="text-center mt-8">
                        <button onclick="resetLesson()" class="bg-white/20 hover:bg-white/30 text-white border border-white/40 font-bold py-2 px-6 rounded-full transition duration-300">
                            L√†m l·∫°i b√†i t·∫≠p üîÑ
                        </button>
                    </div>
                </div>
            </div>
        </section>
        
        <footer class="text-center mt-10 text-gray-500 text-sm pb-10">
            T√†i li·ªáu h·ªçc t·∫≠p t∆∞∆°ng t√°c - Ch·ªß ƒë·ªÅ ƒêa th·ª©c m·ªôt bi·∫øn
        </footer>
    </div>

    <script>
        // --- LOGIC HO·∫†T ƒê·ªòNG 1: S·∫ÆP X·∫æP ---
        function pickTerm(btn) {
            const slots = document.querySelectorAll('.slot');
            for (let slot of slots) {
                if (slot.getAttribute('data-filled') === 'false') {
                    // ƒê∆∞a n·ªôi dung n√∫t v√†o slot
                    slot.innerHTML = `<span class="math-text text-blue-800 font-bold text-lg">${btn.innerText}</span>`;
                    slot.setAttribute('data-filled', 'true');
                    slot.setAttribute('data-val', btn.getAttribute('data-val'));
                    slot.setAttribute('data-source-id', btn.id);
                    
                    // ·∫®n n√∫t ƒëi (thay v√¨ x√≥a ƒë·ªÉ c√≥ th·ªÉ ho√†n t√°c d·ªÖ d√†ng)
                    btn.classList.add('invisible');
                    
                    // X√≥a th√¥ng b√°o c≈© n·∫øu ƒëang c√≥
                    document.getElementById('act1-msg').innerHTML = '';
                    break;
                }
            }
        }

        function returnTerm(slot) {
            if (slot.getAttribute('data-filled') === 'true') {
                const sourceId = slot.getAttribute('data-source-id');
                const btn = document.getElementById(sourceId);
                
                // Hi·ªán l·∫°i n√∫t
                if(btn) btn.classList.remove('invisible');
                
                // L√†m tr·ªëng slot
                slot.innerHTML = '';
                slot.setAttribute('data-filled', 'false');
                slot.removeAttribute('data-val');
                slot.removeAttribute('data-source-id');
                
                // ·∫®n n√∫t Next n·∫øu ƒëang hi·ªán, x√≥a th√¥ng b√°o
                document.getElementById('act1-msg').innerHTML = '';
                document.getElementById('next-act-btn').classList.add('hidden');
                document.getElementById('check-act1-btn').classList.remove('hidden');
            }
        }

        function checkActivity1() {
            const slots = document.querySelectorAll('.slot');
            let currentOrder = [];
            slots.forEach(s => {
                if(s.getAttribute('data-val')) currentOrder.push(s.getAttribute('data-val'));
            });

            const expected = ['-3x4', '7x3', '5x2', '-x', '2']; // ƒê√°p √°n ƒë√∫ng
            const msgDiv = document.getElementById('act1-msg');

            if (currentOrder.length < 5) {
                msgDiv.innerHTML = '<span class="text-amber-600 bg-amber-50 px-4 py-2 rounded-lg inline-block border border-amber-200">H√£y ƒë∆∞a ƒë·∫ßy ƒë·ªß 5 h·∫°ng t·ª≠ v√†o √¥ tr·ªëng nh√©! üßê</span>';
                return;
            }

            let isCorrect = true;
            for(let i=0; i<5; i++) {
                if(currentOrder[i] !== expected[i]) isCorrect = false;
            }

            if (isCorrect) {
                msgDiv.innerHTML = '<span class="text-green-700 bg-green-50 px-4 py-2 rounded-lg inline-block border border-green-200">Tuy·ªát v·ªùi! B·∫°n ƒë√£ s·∫Øp x·∫øp ƒë√∫ng b·∫≠c gi·∫£m d·∫ßn (4 ‚Üí 3 ‚Üí 2 ‚Üí 1 ‚Üí 0). üéâ</span>';
                document.getElementById('next-act-btn').classList.remove('hidden');
                document.getElementById('check-act1-btn').classList.add('hidden'); // ·∫®n n√∫t ki·ªÉm tra ƒëi
                confettiEffect(); // T√°i s·ª≠ d·ª•ng hi·ªáu ·ª©ng ph√°o gi·∫•y
            } else {
                msgDiv.innerHTML = '<span class="text-red-600 bg-red-50 px-4 py-2 rounded-lg inline-block border border-red-200">Ch∆∞a ƒë√∫ng th·ª© t·ª± gi·∫£m d·∫ßn r·ªìi. B·∫°n nh·ªõ xem kƒ© s·ªë m≈© c·ªßa x nh√©! ‚ùå</span>';
            }
        }

        function checkPracticeAnswers() {
            // ·∫®n c√°c th√¥ng b√°o l·ªói c≈©
            const messageArea = document.getElementById('message-area');
            const errorBox = document.getElementById('error-box');
            messageArea.classList.remove('hidden');
            errorBox.classList.add('hidden');

            // L·∫•y gi√° tr·ªã H·ªá s·ªë ƒëa th·ª©c r√∫t g·ªçn
            const c4 = parseInt(document.getElementById('coef-4').value);
            const c3 = parseInt(document.getElementById('coef-3').value);
            const c2 = parseInt(document.getElementById('coef-2').value);
            const c1 = parseInt(document.getElementById('coef-1').value);
            const c0 = parseInt(document.getElementById('coef-0').value);
            
            // L·∫•y gi√° tr·ªã C√°c th√¥ng s·ªë
            const deg = parseInt(document.getElementById('ans-deg').value);
            const lead = parseInt(document.getElementById('ans-lead').value);
            const constant = parseInt(document.getElementById('ans-const').value);

            let isCorrect = true;
            let errMsg = "<ul class='list-disc ml-5 mt-2 space-y-2'>";

            // Ki·ªÉm tra xem c√≥ √¥ n√†o b·ªã b·ªè tr·ªëng kh√¥ng
            if (isNaN(c4) || isNaN(c3) || isNaN(c2) || isNaN(c1) || isNaN(c0) || isNaN(deg) || isNaN(lead) || isNaN(constant)) {
                showError("Vui l√≤ng ƒëi·ªÅn ƒë·∫ßy ƒë·ªß t·∫•t c·∫£ c√°c √¥ tr·ªëng b·∫±ng s·ªë! ‚ö†Ô∏è");
                return;
            }

            // Ki·ªÉm tra k·∫øt qu·∫£ r√∫t g·ªçn
            // ƒêa th·ª©c: Q(x) = 4x‚Å¥ - 3x¬≥ - x¬≤ + 2x + 1 - 4x‚Å¥ + 5x¬≥ - 4x¬≤ + 6x - 4
            // R√∫t g·ªçn: 0x‚Å¥ + 2x¬≥ - 5x¬≤ + 8x - 3
            if (c4 !== 0 || c3 !== 2 || c2 !== -5 || c1 !== 8 || c0 !== -3) { 
                isCorrect = false; 
                errMsg += "<li><strong>K·∫øt qu·∫£ r√∫t g·ªçn ch∆∞a ƒë√∫ng.</strong> H√£y nh√≥m c√°c h·∫°ng t·ª≠ c√πng b·∫≠c v√† t√≠nh to√°n c·∫©n th·∫≠n (ch√∫ √Ω d·∫•u √¢m). H·∫°ng t·ª≠ b·ªã tri·ªát ti√™u th√¨ h·ªá s·ªë l√† bao nhi√™u?</li>"; 
            }
            
            if (deg !== 3) { 
                isCorrect = false; 
                errMsg += "<li><strong>B·∫≠c c·ªßa Q(x) ch∆∞a ƒë√∫ng.</strong> Sau khi r√∫t g·ªçn, bi·∫øn c√≥ s·ªë m≈© cao nh·∫•t c√≤n l·∫°i l√† bao nhi√™u?</li>"; 
            }
            
            if (lead !== 2) { 
                isCorrect = false; 
                errMsg += "<li><strong>H·ªá s·ªë cao nh·∫•t ch∆∞a ƒë√∫ng.</strong> Nh·ªõ l·∫°i ƒë·ªãnh nghƒ©a: N√≥ l√† h·ªá s·ªë ƒëi k√®m v·ªõi bi·∫øn c√≥ b·∫≠c cao nh·∫•t, KH√îNG PH·∫¢I l√† s·ªë c√≥ gi√° tr·ªã l·ªõn nh·∫•t trong ƒëa th·ª©c!</li>"; 
            }
            
            if (constant !== -3) { 
                isCorrect = false; 
                errMsg += "<li><strong>H·ªá s·ªë t·ª± do ch∆∞a ƒë√∫ng.</strong> N√≥ l√† h·∫°ng t·ª≠ kh√¥ng ch·ª©a bi·∫øn x.</li>"; 
            }

            errMsg += "</ul>";

            if (isCorrect) {
                showSuccess();
            } else {
                showError(errMsg);
            }
        }

        function showError(htmlMessage) {
            const errorBox = document.getElementById('error-box');
            document.getElementById('error-text').innerHTML = htmlMessage;
            errorBox.classList.remove('hidden');
        }

        function showSuccess() {
            // ·∫®n n√∫t n·ªôp b√†i
            document.getElementById('action-buttons').classList.add('hidden');
            document.getElementById('message-area').classList.add('hidden');

            // Kh√≥a c√°c √¥ input (Read-only)
            const inputs = document.querySelectorAll('input[type="number"]');
            inputs.forEach(input => {
                input.readOnly = true;
                input.classList.add('bg-green-50', 'text-green-800');
            });

            // Hi·ªÉn th·ªã B√≠ K√≠p Ghi V·ªü
            const notes = document.getElementById('secret-notes');
            notes.classList.remove('hidden');
            
            setTimeout(() => {
                notes.classList.remove('opacity-0', 'translate-y-10');
                notes.scrollIntoView({ behavior: 'smooth', block: 'start' });
            }, 100);

            // B·∫Øn ph√°o hoa
            let shots = 0;
            const interval = setInterval(() => {
                confettiEffect();
                shots++;
                if(shots > 3) clearInterval(interval);
            }, 600);
        }

        function resetLesson() {
            // M·ªü kh√≥a v√† x√≥a to√†n b·ªô input
            const inputs = document.querySelectorAll('input[type="number"]');
            inputs.forEach(input => {
                input.value = '';
                input.readOnly = false;
                input.classList.remove('bg-green-50', 'text-green-800');
            });
            
            // ·∫®n th√¥ng b√°o v√† B√≠ k√≠p
            document.getElementById('message-area').classList.add('hidden');
            document.getElementById('error-box').classList.add('hidden');
            
            const notes = document.getElementById('secret-notes');
            notes.classList.add('opacity-0', 'translate-y-10');
            setTimeout(() => notes.classList.add('hidden'), 500);

            // Hi·ªán l·∫°i n√∫t n·ªôp b√†i
            document.getElementById('action-buttons').classList.remove('hidden');
            
            // Cu·ªôn l√™n b√†i t·∫≠p
            document.getElementById('practice-section').scrollIntoView({ behavior: 'smooth' });
        }

        // Hi·ªáu ·ª©ng ph√°o gi·∫•y ƒë∆°n gi·∫£n b·∫±ng Javascript thu·∫ßn
        function confettiEffect() {
            const duration = 3000;
            const end = Date.now() + duration;

            (function frame() {
                const confetto = document.createElement('div');
                confetto.className = 'fixed w-3 h-3 rounded-full pointer-events-none z-50';
                confetto.style.left = Math.random() * 100 + 'vw';
                confetto.style.top = '-10px';
                confetto.style.backgroundColor = ['#f87171', '#60a5fa', '#34d399', '#fbbf24', '#a78bfa', '#ec4899'][Math.floor(Math.random() * 6)];
                
                // Random h√¨nh d·∫°ng (tr√≤n ho·∫∑c vu√¥ng)
                if(Math.random() > 0.5) confetto.style.borderRadius = '0';

                document.body.appendChild(confetto);

                const animation = confetto.animate([
                    { transform: 'translate3d(0,0,0) rotate(0deg)', opacity: 1 },
                    { transform: `translate3d(${Math.random()*300 - 150}px, 100vh, 0) rotate(${Math.random()*720}deg)`, opacity: 0 }
                ], {
                    duration: Math.random() * 1000 + 1500,
                    easing: 'cubic-bezier(.37,0,.63,1)'
                });

                animation.onfinish = () => confetto.remove();

                if (Date.now() < end) {
                    requestAnimationFrame(frame);
                }
            }());
        }
    </script>
</body>
</html>
