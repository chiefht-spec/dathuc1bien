<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Kh√°m Ph√° ƒêa Th·ª©c M·ªôt Bi·∫øn</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/framer-motion/10.16.4/framer-motion.umd.min.js"></script>
    <link href="https://fonts.googleapis.com/css2?family=Quicksand:wght@400;600;700&display=swap" rel="stylesheet">
    <style>
        body { font-family: 'Quicksand', sans-serif; background: #f0f7ff; }
        .card { transition: all 0.3s ease; cursor: grab; }
        .card:active { cursor: grabbing; scale: 1.05; }
        .drop-zone { min-height: 200px; transition: background 0.3s; }
        .notebook { 
            background: #fff;
            background-image: radial-gradient(#d1d1d1 1px, transparent 1px);
            background-size: 20px 20px;
            box-shadow: 5px 5px 15px rgba(0,0,0,0.1);
            border-left: 10px solid #3b82f6;
        }
        .math-text { font-family: 'Times New Roman', serif; font-style: italic; }
    </style>
</head>
<body class="p-4 md:p-8">

    <div id="app" class="max-w-5xl mx-auto">
        <!-- Header -->
        <header class="text-center mb-8">
            <h1 class="text-4xl font-bold text-blue-700 mb-2">Th·ª≠ Th√°ch: Nh√† Ph√¢n Lo·∫°i T√†i Ba üß©</h1>
            <p class="text-gray-600 italic">K√©o c√°c th·∫ª bi·ªÉu th·ª©c v√†o ƒë√∫ng nh√≥m ƒë·ªÉ kh√°m ph√° b√≠ m·∫≠t!</p>
        </header>

        <!-- Game Section -->
        <div id="game-section" class="grid grid-cols-1 md:grid-cols-3 gap-6">
            
            <!-- Items to Drag -->
            <div class="bg-white p-4 rounded-2xl shadow-md">
                <h2 class="font-bold text-center mb-4 text-gray-700 border-b pb-2">Kho Bi·ªÉu Th·ª©c</h2>
                <div id="item-pool" class="flex flex-wrap gap-3 justify-center">
                    <!-- Cards will be injected here -->
                </div>
            </div>

            <!-- Drop Zone 1 -->
            <div id="zone-single" class="drop-zone bg-blue-50 border-4 border-dashed border-blue-300 rounded-3xl p-4 flex flex-col items-center">
                <div class="text-3xl mb-2">üë§</div>
                <h3 class="font-bold text-blue-800 text-center uppercase text-sm mb-4">Bi·ªÉu th·ª©c ch·ªâ ch·ª©a 1 bi·∫øn (x ho·∫∑c y...)</h3>
                <div class="w-full space-y-2 flex flex-wrap gap-2 justify-center" id="single-variable-list"></div>
            </div>

            <!-- Drop Zone 2 -->
            <div id="zone-multi" class="drop-zone bg-purple-50 border-4 border-dashed border-purple-300 rounded-3xl p-4 flex flex-col items-center">
                <div class="text-3xl mb-2">üë•</div>
                <h3 class="font-bold text-purple-800 text-center uppercase text-sm mb-4">Bi·ªÉu th·ª©c ch·ª©a nhi·ªÅu bi·∫øn kh√°c nhau</h3>
                <div class="w-full space-y-2 flex flex-wrap gap-2 justify-center" id="multi-variable-list"></div>
            </div>

        </div>

        <!-- Notebook Section (Hidden until finished) -->
        <div id="notebook-section" class="mt-12 opacity-0 transform translate-y-10 transition-all duration-700">
            <div class="notebook p-8 rounded-r-2xl relative overflow-hidden">
                <div class="absolute top-4 right-4 text-5xl opacity-10">üìñ</div>
                <h2 class="text-2xl font-bold text-blue-600 border-b-2 border-blue-100 pb-2 mb-6">üìî S·ªï Tay Ki·∫øn Th·ª©c Ch√¢n Tr·ªùi</h2>
                
                <div class="space-y-6">
                    <section>
                        <h3 class="text-xl font-semibold text-orange-600 flex items-center">
                            <span class="mr-2">üîπ</span> ƒê∆°n th·ª©c m·ªôt bi·∫øn
                        </h3>
                        <p class="text-gray-700 ml-6 mt-2">
                            L√† bi·ªÉu th·ª©c ƒë·∫°i s·ªë ch·ªâ g·ªìm <span class="font-bold">m·ªôt s·ªë</span>, ho·∫∑c <span class="font-bold">m·ªôt bi·∫øn</span>, ho·∫∑c m·ªôt <span class="font-bold">t√≠ch</span> gi·ªØa c√°c s·ªë v√† bi·∫øn ƒë√≥.
                            <br>
                            <span class="bg-orange-50 px-2 py-1 rounded italic">V√≠ d·ª•: 3, x, -2x, 5x¬≤, ...</span>
                        </p>
                    </section>

                    <section>
                        <h3 class="text-xl font-semibold text-blue-600 flex items-center">
                            <span class="mr-2">üîπ</span> ƒêa th·ª©c m·ªôt bi·∫øn
                        </h3>
                        <p class="text-gray-700 ml-6 mt-2">
                            L√† <span class="font-bold text-blue-700 underline">T·ªïng</span> c·ªßa nh·ªØng ƒë∆°n th·ª©c c·ªßa c√πng m·ªôt bi·∫øn.
                            <br>
                            <span class="bg-blue-50 px-2 py-1 rounded italic">V√≠ d·ª•: A(x) = 2x¬≤ + 3x - 5</span>
                        </p>
                        <div class="ml-6 mt-4 p-4 bg-yellow-50 border-l-4 border-yellow-400 text-sm">
                            <strong>Ch√∫ √Ω:</strong> M·ªói ƒë∆°n th·ª©c m·ªôt bi·∫øn c≈©ng ƒë∆∞·ª£c xem l√† m·ªôt ƒëa th·ª©c m·ªôt bi·∫øn.
                        </div>
                    </section>
                </div>
                
                <div class="mt-8 text-center">
                    <button onclick="location.reload()" class="bg-blue-600 hover:bg-blue-700 text-white font-bold py-2 px-6 rounded-full transition shadow-lg">
                        L√†m l·∫°i th·ª≠ th√°ch üîÑ
                    </button>
                </div>
            </div>
        </div>
    </div>

    <script>
        const expressions = [
            { id: 1, val: "2x", type: "single" },
            { id: 2, val: "-5x¬≤", type: "single" },
            { id: 3, val: "3x + y", type: "multi" },
            { id: 4, val: "x¬≤ - 2x + 5", type: "single" },
            { id: 5, val: "ab - 1", type: "multi" },
            { id: 6, val: "y¬≥ + 2y - 1", type: "single" },
            { id: 7, val: "x - z", type: "multi" },
            { id: 8, val: "7", type: "single" },
            { id: 9, val: "x", type: "single" },
            { id: 10, val: "x¬≤y", type: "multi" }
        ];

        let completedCount = 0;
        const pool = document.getElementById('item-pool');
        const notebook = document.getElementById('notebook-section');

        function initGame() {
            expressions.sort(() => Math.random() - 0.5).forEach(expr => {
                const card = document.createElement('div');
                card.className = "card bg-white border-2 border-gray-200 px-4 py-2 rounded-xl shadow-sm text-lg math-text font-bold text-gray-800";
                card.draggable = true;
                card.innerText = expr.val;
                card.dataset.id = expr.id;
                card.dataset.type = expr.type;
                
                card.addEventListener('dragstart', (e) => {
                    e.dataTransfer.setData('text/plain', expr.id);
                    card.classList.add('opacity-50');
                });

                card.addEventListener('dragend', () => card.classList.remove('opacity-50'));
                pool.appendChild(card);
            });
        }

        const zones = ['zone-single', 'zone-multi'];
        zones.forEach(zoneId => {
            const zone = document.getElementById(zoneId);
            zone.addEventListener('dragover', (e) => e.preventDefault());
            
            zone.addEventListener('drop', (e) => {
                e.preventDefault();
                const id = e.dataTransfer.getData('text/plain');
                const itemData = expressions.find(ex => ex.id == id);
                const isCorrect = (zoneId === 'zone-single' && itemData.type === 'single') || 
                                  (zoneId === 'zone-multi' && itemData.type === 'multi');

                if (isCorrect) {
                    const card = document.querySelector(`[data-id="${id}"]`);
                    const targetList = zoneId === 'zone-single' ? 'single-variable-list' : 'multi-variable-list';
                    document.getElementById(targetList).appendChild(card);
                    card.draggable = false;
                    card.classList.replace('border-gray-200', zoneId === 'zone-single' ? 'border-blue-400' : 'border-purple-400');
                    card.classList.add('scale-90');
                    
                    completedCount++;
                    checkWin();
                } else {
                    const message = document.createElement('div');
                    message.innerText = "Sai nh√≥m r·ªìi b·∫°n ∆°i! ‚ùå";
                    message.className = "fixed bottom-10 left-1/2 transform -translate-x-1/2 bg-red-500 text-white px-4 py-2 rounded-full shadow-lg transition-opacity duration-500";
                    document.body.appendChild(message);
                    setTimeout(() => message.remove(), 2000);
                }
            });
        });

        function checkWin() {
            if (completedCount === expressions.length) {
                notebook.classList.remove('opacity-0', 'translate-y-10');
                notebook.scrollIntoView({ behavior: 'smooth' });
                showSuccessEffect();
            }
        }

        function showSuccessEffect() {
            const colors = ['#3b82f6', '#8b5cf6', '#10b981'];
            for(let i=0; i<20; i++) {
                const conf = document.createElement('div');
                conf.className = "fixed pointer-events-none";
                conf.style.left = Math.random() * 100 + 'vw';
                conf.style.top = '-10px';
                conf.style.width = '10px';
                conf.style.height = '10px';
                conf.style.backgroundColor = colors[Math.floor(Math.random() * colors.length)];
                conf.style.borderRadius = "50%";
                document.body.appendChild(conf);
                
                const anim = conf.animate([
                    { transform: 'translateY(0) rotate(0deg)', opacity: 1 },
                    { transform: `translateY(100vh) rotate(${Math.random() * 360}deg)`, opacity: 0 }
                ], { duration: 2000 + Math.random() * 3000 });
                anim.onfinish = () => conf.remove();
            }
        }

        window.onload = initGame;
    </script>
</body>
</html>
